"use strict";(self.webpackChunkAgentaEventos_app=self.webpackChunkAgentaEventos_app||[]).push([[843],{3843:(we,g,c)=>{c.r(g),c.d(g,{UserModule:()=>Ce});var l=c(6895),a=c(5588),G=c(7579),A=c(2722),S=c(8224),E=c(8486),U=c(1818),e=c(4650),h=c(9167),x=c(427),Z=c(9653),M=c(3882),T=c(8807),C=c(6180),w=c(266);function O(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"generic-button",1),e.NdJ("clicked",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.isEdit=!s.isEdit)}),e.qZA()}2&n&&e.Q6J("type","cancelEdit")("classButton","d-block mat-elevation-z3 bef bef-btnOutline-btnBG bef-bc-btnBG bef-bW-btnBG bef-bS-solid bef-text-mainText bef-textHover-mainBG bef-cursor-pointer bef-r-100per bef-fs-1_5rem bef-h-2_5rem bef-w-2_5rem p-0")("customHtml","X")("disabledClassButton","d-block bef bef-btnOutline-btnBG__OPA__0_66 bef-bc-btnBG bef-bW-btnBG bef-bS-solid bef-text-mainText bef-textHover-mainBG bef-cursor-pointer bef-r-100per bef-fs-1_5rem bef-h-2_5rem bef-w-2_5rem p-0")("tooltip","Cancelar edici\xf3n")("tooltipPosition","left")("showTooltip",!0)("tooltipClass","bef bef-r-1rem bef-text-mainBG bef-bg-btnBG bef-p-1rem")}const b="d-block mx-auto fw-bold bef bef-text-danger bef-my-1rem",I=function(){return{text:"El t\xedtulo del user es necesario.",evalThing:"required",spanClass:b}},_=function(n){return[n]};function P(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",14)(1,"generic-input",15),e.NdJ("changesInput",function(s){e.CHM(t);const o=e.oxw();return e.KtG(o.changesInput(s))}),e.qZA(),e.TgZ(2,"generic-button",13),e.NdJ("clicked",function(s){e.CHM(t);const o=e.oxw();return e.KtG(o.changeChangers(s))}),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("labelTitle","Nombre del usuario")("placeholder",t.user.name)("thingFather",t.user)("thing","name")("type","text")("spans",e.VKq(18,_,e.DdM(17,I)))("required",!0)("required",!0),e.xp6(1),e.Q6J("type","name")("classButton","d-block mat-elevation-z3 bef bef-btn-btnBG bef-text-mainBG bef-cursor-pointer bef-r-100per bef-fs-1rem bef-h-2_5rem bef-w-2_5rem")("customHtml","X")("disabledClassButton","d-block bef bef-btn-btnBG__OPA__0_66 bef-text-mainBG bef-cursor-pointer bef-r-100per bef-fs-3rem bef-h-3_5rem bef-w-3_5rem")("tooltip","Cancelar edici\xf3n")("tooltipPosition","left")("showTooltip",!0)("tooltipClass","bef bef-r-1rem bef-text-mainBG bef-bg-btnBG bef-p-1rem")("matButtonType","icon")}}function H(n,r){if(1&n){const t=e.EpF();e.O4$(),e.TgZ(0,"svg",18),e.NdJ("click",function(){e.CHM(t);const s=e.oxw(2);return e.KtG(s.changeChangers("name"))}),e._UZ(1,"path",19),e.qZA()}}function F(n,r){if(1&n&&(e.TgZ(0,"h1",16),e._uU(1),e.YNc(2,H,2,0,"svg",17),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.hij(" ",t.user.name," "),e.xp6(1),e.Q6J("ngIf",!!t.isEdit)}}const J=function(){return{text:"El subt\xedtulo del user es necesario.",evalThing:"required",spanClass:b}};function L(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",14)(1,"generic-input",15),e.NdJ("changesInput",function(s){e.CHM(t);const o=e.oxw();return e.KtG(o.changesInput(s))}),e.qZA(),e.TgZ(2,"generic-button",13),e.NdJ("clicked",function(s){e.CHM(t);const o=e.oxw();return e.KtG(o.changeChangers(s))}),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("labelTitle","Email del usuario")("placeholder",t.user.email)("thingFather",t.user)("thing","email")("type","text")("spans",e.VKq(17,_,e.DdM(16,J)))("required",!0),e.xp6(1),e.Q6J("type","email")("classButton","d-block mat-elevation-z3 bef bef-btn-btnBG bef-text-mainBG bef-cursor-pointer bef-r-100per bef-fs-1rem bef-h-2_5rem bef-w-2_5rem")("customHtml","X")("disabledClassButton","d-block bef bef-btn-btnBG__OPA__0_66 bef-text-mainBG bef-cursor-pointer bef-r-100per bef-fs-3rem bef-h-3_5rem bef-w-3_5rem")("tooltip","Cancelar edici\xf3n")("tooltipPosition","left")("showTooltip",!0)("tooltipClass","bef bef-r-1rem bef-text-mainBG bef-bg-btnBG bef-p-1rem")("matButtonType","icon")}}function N(n,r){if(1&n){const t=e.EpF();e.O4$(),e.TgZ(0,"svg",22),e.NdJ("click",function(){e.CHM(t);const s=e.oxw(2);return e.KtG(s.changeChangers("email"))}),e._UZ(1,"path",19),e.qZA()}}function D(n,r){if(1&n&&(e.TgZ(0,"h2",20),e._uU(1),e.YNc(2,N,2,0,"svg",21),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.hij(" ",t.user.email," "),e.xp6(1),e.Q6J("ngIf",!!t.isEdit)}}const z=function(n){return{text:"La confirmaci\xf3n de la contrase\xf1a debe ser igual a la contrase\xf1a.",evalThing:n,spanClass:b}},m=function(){return{text:"La contrase\xf1a debe contener al menos una letra, una may\xfascula, un n\xfamero y un car\xe1cter especial. Adem\xe1s de tener una longitud de al menos 8 caracteres.",evalThing:"password",spanClass:b}},v=function(n,r){return[n,r]};function R(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"generic-input",23),e.NdJ("changesInput",function(s){e.CHM(t);const o=e.oxw(2);return e.KtG(o.changesInput(s))}),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("labelTitle","Confirmaci\xf3n de la nueva contrase\xf1a del usuario")("placeholder","Confirmaci\xf3n de la nueva contrase\xf1a del usuario")("thingFather",t.user2compare)("thing","password")("type","password")("spans",e.WLB(10,v,e.VKq(7,z,"equal"+t.user.password),e.DdM(9,m)))("required",!0)}}const Y=function(){return{type:"menuitem",option:"basic",click:"roleType=basic"}},K=function(){return{type:"menuitem",option:"premium",click:"roleType=premium"}},j=function(){return{type:"menuitem",option:"special",click:"roleType=special"}},W=function(n,r,t){return[n,r,t]};function V(n,r){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"h2",27),e._uU(2," Tipo de rol del usuario "),e.qZA(),e.TgZ(3,"generic-input",28),e.NdJ("clicked",function(s){e.CHM(t);const o=e.oxw(2);return e.KtG(o.clickedDropdown(s))}),e.qZA(),e.TgZ(4,"h2",27),e._uU(5," Rol general del usuario "),e.qZA(),e.TgZ(6,"generic-input",28),e.NdJ("clicked",function(s){e.CHM(t);const o=e.oxw(2);return e.KtG(o.clickedDropdown(s))}),e.qZA(),e.BQk()}if(2&n){const t=e.oxw(2);e.xp6(3),e.Q6J("placeholder",t.user.roleType)("thingFather",t.user)("thing","roleType")("type","select")("options",e.kEZ(13,W,e.DdM(10,Y),e.DdM(11,K),e.DdM(12,j))),e.xp6(3),e.Q6J("placeholder",t.user.generalRole)("thingFather",t.user)("thing","generalRole")("type","select")("options",t.generalRoleOptions)}}const X=function(){return{text:"La contrase\xf1a es necesaria para actualizar al usuario.",evalThing:"required",spanClass:b}};function ee(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"generic-input",29),e.NdJ("changesInput",function(s){e.CHM(t);const o=e.oxw(2);return e.KtG(o.changesInput(s))}),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("labelTitle","Contrase\xf1a Actual")("placeholder","Contrase\xf1a Actual")("thingFather",t.user)("thing","lastPassword")("type","password")("spans",e.WLB(9,v,e.DdM(7,X),e.DdM(8,m)))("required",!0)}}function te(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"generic-button",30),e.NdJ("clicked",function(){e.CHM(t);const s=e.oxw(2);return e.KtG(s.onSubmit())}),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("type","Editar")("classButton","d-block mx-auto mat-elevation-z3 bef bef-my-2rem bef-btn-btnBG bef-text-mainBG bef-cursor-pointer bef-r-0_25rem bef-fs-1rem")("customHtml",""===t.user._id?"Registrar usuario":"Actualizar cambios")("disabledClassButton","d-block mx-auto bef bef-my-2rem bef-btn-btnBG__OPA__0_5 bef-text-mainBG bef-r-0_25rem bef-cursor-pointer bef-fs-1rem")("tooltip",""===t.user._id?"Crear usuario":"Actualizar cambios")("tooltipPosition","left")("showTooltip",!0)("tooltipClass","bef bef-r-1rem bef-text-mainBG bef-bg-btnBG bef-p-1rem")("matButtonType","raised")("disabled",!t.checkIfFormValid())}}function ne(n,r){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"generic-input",23),e.NdJ("changesInput",function(s){e.CHM(t);const o=e.oxw();return e.KtG(o.changesInput(s))}),e.qZA(),e.YNc(2,R,1,13,"generic-input",24),e.YNc(3,V,7,17,"ng-container",9),e.YNc(4,ee,1,12,"generic-input",25),e.YNc(5,te,1,10,"generic-button",26),e.BQk()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("labelTitle",(""!==t.user._id?"Nueva C":"C")+"ontrase\xf1a del usuario")("placeholder",(""!==t.user._id?"Nueva C":"C")+"ontrase\xf1a del usuario")("thingFather",t.user)("thing","password")("type","password")("spans",e.VKq(12,_,e.DdM(11,m)))("required",!0),e.xp6(1),e.Q6J("ngIf",""!==t.user.password),e.xp6(1),e.Q6J("ngIf",!!t.isEdit&&!!t.identity&&t.checkRole(t.identity.roleType,t.identity.generalRole,"special")),e.xp6(1),e.Q6J("ngIf",""!==t.user._id),e.xp6(1),e.Q6J("ngIf",!!t.isEdit)}}function ie(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",31),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.showOptions=!s.showOptions)}),e.qZA()}}function se(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",34)(1,"span",35),e._uU(2),e.qZA(),e.TgZ(3,"generic-button",13),e.NdJ("clicked",function(s){e.CHM(t);const o=e.oxw(2);return e.KtG(o.clickedButton(s))}),e.qZA()()}if(2&n){const t=r.$implicit;e.xp6(2),e.hij(" ",t.text," "),e.xp6(1),e.Q6J("type",t.click)("classButton","d-block mat-elevation-z3 bef bef-btn-btnBG bef-text-mainBG bef-cursor-pointer bef-r-100per bef-fs-2_5rem bef-h-3rem bef-w-3rem")("customHtml",t.icon)("disabledClassButton","d-block bef bef-btn-btnBG__OPA__0_66 bef-text-mainBG bef-cursor-pointer bef-r-100per bef-fs-3rem bef-h-3_5rem bef-w-3_5rem")("tooltip",t.text)("tooltipPosition","left")("showTooltip",!0)("tooltipClass","bef bef-r-1rem bef-text-mainBG bef-bg-btnBG bef-p-1rem")("matButtonType","icon")}}function oe(n,r){if(1&n&&(e.TgZ(0,"div",32),e.YNc(1,se,4,10,"div",33),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.options)}}const re=function(){return["/"]};let B=(()=>{class n{constructor(t,i,s,o,p,f){this.location=t,this._router=i,this._route=s,this._sharedService=o,this._userService=p,this.store=f,this.user=new S.n("","","basic","asistente",[],"","","","",!1,0,new Date,new Date,null,"",0,!1,[]),this.user2compare={password:""},this.lockeds={name:!0,email:!0,password:!0,lastPassword:""!==this.user._id},this.generalRoleOptions=this.getGeneralRoleOptions(),this.isEdit=!0,this.changers=["name","email"],this.showOptions=!1,this.options=[{id:"edit",icon:this.getHTML("edit"),show:!0,text:"Editar",click:"edit"},{id:"photos",icon:this.getHTML("photos"),show:!1,text:"Comparte fotos",click:"photos"},{id:"score",icon:this.getHTML("score"),show:!1,text:"\xa1Calif\xedcanos!",click:"score"}],this._unsubscribeAll=new G.x,this.identity$=this.store.select(E.Lm)}ngOnInit(){this._route.params.subscribe({next:t=>{t.id&&this.getData(t.id)},error:t=>{this._sharedService.consoleParser({thing:t,type:"error"})}}),this.getIdentity(),this.store.dispatch((0,U.DK)()),this.cssCreate()}getIdentity(){this.identity$.pipe((0,A.R)(this._unsubscribeAll)).subscribe({next:t=>{this.identity=t},error:t=>{this._sharedService.consoleParser({thing:t,type:"error"})}})}getData(t){this._userService.getUser(t).subscribe({next:i=>{this.isEdit=!1,this.changers=[],this.user=i.user?i.user:this.user,this.user.password="",this.user2compare.password="",this.user.lastPassword="",this.user.passRec="",this.generalRoleOptions=this.getGeneralRoleOptions(),this.checkForLockeds(),this.cssCreate()},error:i=>{this._sharedService.consoleParser({thing:i,type:"error"}),this._router.navigate(["**"])}})}onSubmit(){""!==this.user._id?this._userService.updateUser(this.user).subscribe({next:t=>{this.user=t.user?t.user:this.user,this.user.password="",this.user2compare.password="",this.user.lastPassword="",this.user.passRec="",this.generalRoleOptions=this.getGeneralRoleOptions(),this.checkForLockeds(),this.cssCreate()},error:t=>{this._sharedService.consoleParser({thing:t,type:"error"})}}):(this.user.lastPassword=this.user.password,this._userService.register(this.user).subscribe({next:t=>{this.user=t.user?t.user:this.user,this.user.password="",this.user2compare.password="",this.user.lastPassword="",this.user.passRec="",this.generalRoleOptions=this.getGeneralRoleOptions(),this.checkForLockeds(),this.cssCreate()},error:t=>{this._sharedService.consoleParser({thing:t,type:"error"})}}))}checkForLockeds(){this.lockeds.name=""===this.user.name,this.lockeds.email=""===this.user.email,this.lockeds.password=""===this.user.password&&""===this.user._id,this.lockeds.lastPassword=""===this.user.lastPassword}getGeneralRoleOptions(){const t=[{type:"menuitem",option:"asistente",click:"generalRole=asistente"}];return("premium"===this.user.roleType||"special"===this.user.roleType)&&(t.push({type:"menuitem",option:"operador",click:"generalRole=operador"}),t.push({type:"menuitem",option:"administrador",click:"generalRole=administrador"}),t.push({type:"menuitem",option:"t\xe9cnico",click:"generalRole=t\xe9cnico"})),t}changesInput(t){Object.keys(this.lockeds).forEach(i=>{this.lockeds[i]=t[i]?t.locked:this.lockeds[i]}),this.checkIfFormValid()&&this.cssCreate()}checkIfFormValid(){return Object.values(this.lockeds).every(t=>!1===t)}changeChangers(t){if(this.isEdit)if(this.changers.includes(t)){let i=this.changers.indexOf(t);this.changers.splice(i,1)}else this.changers.push(t)}clickedDropdown(t){switch(!0){case t.click.includes("roleType"):this.user.roleType=t.click.split("=")[1]||"basic","basic"===this.user.roleType&&(this.user.generalRole="asistente"),this.generalRoleOptions=this.getGeneralRoleOptions();break;case t.click.includes("generalRole"):this.user.generalRole=t.click.split("=")[1]||"asistente"}}clickedButton(t){"edit"===t&&(this.isEdit=!0,this.showOptions=!1)}getHTML(t){return this._sharedService.getHTML(t)}returnToPreviousPage(){this.location.back()}checkRole(t,i,s){return this._sharedService.checkRole(t,i,s)}cssCreate(){this._sharedService.cssCreate()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(l.Ye),e.Y36(a.F0),e.Y36(a.gz),e.Y36(h.F),e.Y36(x.K),e.Y36(Z.yh))},n.\u0275cmp=e.Xpm({type:n,selectors:[["user"]],decls:17,vars:30,consts:[[1,"d-flex","mx-auto","flex-wrap","justify-content-between","align-items-center","bef","bef-w-calcSD100per__MIN__2remED"],[3,"type","classButton","customHtml","disabledClassButton","tooltip","tooltipPosition","showTooltip","tooltipClass","clicked"],["href","/","rel","noopener noreferrer",3,"routerLink","matTooltip"],[3,"logoHeight","logoWidth"],[1,"bef","bef-w-2_5rem","bef-h-2_5rem"],[3,"type","classButton","customHtml","disabledClassButton","tooltip","tooltipPosition","showTooltip","tooltipClass","clicked",4,"ngIf"],["class","d-flex flex-wrap justify-content-center align-items-end bef bef-my-2rem",4,"ngIf","ngIfElse"],["elseEditNameTemplate",""],["elseEditEmailTemplate",""],[4,"ngIf"],["class","position-fixed bef bef-t-0 bef-b-0 bef-w-100vw bef-h-100vh bef-bg-mainText__OPA__0_25 bef-z-9",3,"click",4,"ngIf"],[1,"position-fixed","bef","bef-b-2rem","bef-e-2rem","bef-z-10","d-flex","flex-column","align-items-end","bef-g-1rem"],["class","d-flex flex-column bef bef-g-1rem",4,"ngIf"],[3,"type","classButton","customHtml","disabledClassButton","tooltip","tooltipPosition","showTooltip","tooltipClass","matButtonType","clicked"],[1,"d-flex","flex-wrap","justify-content-center","align-items-end","bef","bef-my-2rem"],[1,"bef","bef-w-clampSD200pxCOMcalcSD100per__MIN__3remEDCOM400pxED",3,"labelTitle","placeholder","thingFather","thing","type","spans","required","changesInput"],[1,"bef","bef-fs-2rem","fw-bold","mx-auto","text-break","my-0","bef-mt-md-3rem","text-start","bef-textAlign-md-center"],["xmlns","http://www.w3.org/2000/svg","width","32","height","32","fill","currentColor","class","bi bi-pencil","viewBox","0 0 16 16",3,"click",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","width","32","height","32","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-pencil",3,"click"],["d","M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168l10-10zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207 11.207 2.5zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293l6.5-6.5zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325z"],[1,"text-start","bef","bef-textAlign-md-center","my-0","bef-mb-md-3rem"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","class","bi bi-pencil","viewBox","0 0 16 16",3,"click",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-pencil",3,"click"],[1,"d-block","mx-auto","bef","bef-w-clampSD250pxCOM90perCOM450pxED",3,"labelTitle","placeholder","thingFather","thing","type","spans","required","changesInput"],["class","d-block mx-auto bef bef-w-clampSD250pxCOM90perCOM450pxED",3,"labelTitle","placeholder","thingFather","thing","type","spans","required","changesInput",4,"ngIf"],["class","d-block mx-auto bef bef-my-2rem bef-w-clampSD250pxCOM90perCOM450pxED",3,"labelTitle","placeholder","thingFather","thing","type","spans","required","changesInput",4,"ngIf"],[3,"type","classButton","customHtml","disabledClassButton","tooltip","tooltipPosition","showTooltip","tooltipClass","matButtonType","disabled","clicked",4,"ngIf"],[1,"fw-bold","text-start","bef","bef-textAlign-md-center","my-0","bef-mt-md-3rem","bef-mb-md-1rem"],[3,"placeholder","thingFather","thing","type","options","clicked"],[1,"d-block","mx-auto","bef","bef-my-2rem","bef-w-clampSD250pxCOM90perCOM450pxED",3,"labelTitle","placeholder","thingFather","thing","type","spans","required","changesInput"],[3,"type","classButton","customHtml","disabledClassButton","tooltip","tooltipPosition","showTooltip","tooltipClass","matButtonType","disabled","clicked"],[1,"position-fixed","bef","bef-t-0","bef-b-0","bef-w-100vw","bef-h-100vh","bef-bg-mainText__OPA__0_25","bef-z-9",3,"click"],[1,"d-flex","flex-column","bef","bef-g-1rem"],["class","d-flex flex-row justify-content-end align-items-center bef bef-g-1rem",4,"ngFor","ngForOf"],[1,"d-flex","flex-row","justify-content-end","align-items-center","bef","bef-g-1rem"],[1,"bef","bef-text-mainBG"]],template:function(t,i){if(1&t&&(e.TgZ(0,"header",0)(1,"generic-button",1),e.NdJ("clicked",function(){return i.returnToPreviousPage()}),e.qZA(),e.TgZ(2,"a",2),e._UZ(3,"logo-show",3),e.qZA(),e.TgZ(4,"div",4),e.YNc(5,O,1,8,"generic-button",5),e.qZA()(),e.YNc(6,P,3,20,"div",6),e.YNc(7,F,3,2,"ng-template",null,7,e.W1O),e.YNc(9,L,3,19,"div",6),e.YNc(10,D,3,2,"ng-template",null,8,e.W1O),e.YNc(12,ne,6,14,"ng-container",9),e.YNc(13,ie,1,0,"div",10),e.TgZ(14,"div",11),e.YNc(15,oe,2,1,"div",12),e.TgZ(16,"generic-button",13),e.NdJ("clicked",function(){return i.showOptions=!i.showOptions}),e.qZA()()),2&t){const s=e.MAs(8),o=e.MAs(11);e.xp6(1),e.Q6J("type","return")("classButton","d-block mat-elevation-z3 bef bef-btnOutline-btnBG bef-bc-btnBG bef-bW-btnBG bef-bS-solid bef-text-mainText bef-textHover-mainBG bef-cursor-pointer bef-r-100per bef-fs-2rem bef-h-2_5rem bef-w-2_5rem p-0")("customHtml",i.getHTML("back"))("disabledClassButton","d-block bef bef-btnOutline-btnBG__OPA__0_66 bef-bc-btnBG bef-bW-btnBG bef-bS-solid bef-text-mainText bef-textHover-mainBG bef-cursor-pointer bef-r-100per bef-fs-2rem bef-h-2_5rem bef-w-2_5rem p-0")("tooltip","Regresar")("tooltipPosition","left")("showTooltip",!0)("tooltipClass","bef bef-r-1rem bef-text-mainBG bef-bg-btnBG bef-p-1rem"),e.xp6(1),e.Q6J("routerLink",e.DdM(29,re))("matTooltip","Inicio"),e.xp6(1),e.Q6J("logoHeight","3rem")("logoWidth","3rem"),e.xp6(2),e.Q6J("ngIf",!!i.isEdit),e.xp6(1),e.Q6J("ngIf",(i.changers.includes("name")||""===i.user.name)&&!0===i.isEdit)("ngIfElse",s),e.xp6(3),e.Q6J("ngIf",(i.changers.includes("email")||""===i.user.email)&&!0===i.isEdit)("ngIfElse",o),e.xp6(3),e.Q6J("ngIf",!!i.isEdit),e.xp6(1),e.Q6J("ngIf",!!i.showOptions),e.xp6(2),e.Q6J("ngIf",!!i.showOptions),e.xp6(1),e.Q6J("type","Show Options")("classButton","d-block mat-elevation-z3 bef bef-btn-btnBG bef-text-mainBG bef-cursor-pointer bef-r-100per bef-fs-3rem bef-h-3_5rem bef-w-3_5rem")("customHtml","+")("disabledClassButton","d-block bef bef-btn-btnBG__OPA__0_66 bef-text-mainBG bef-cursor-pointer bef-r-100per bef-fs-3rem bef-h-3_5rem bef-w-3_5rem")("tooltip","Show Options")("tooltipPosition","left")("showTooltip",!0)("tooltipClass","bef bef-r-1rem bef-text-mainBG bef-bg-btnBG bef-p-1rem")("matButtonType","icon")}},dependencies:[l.sg,l.O5,a.rH,M.V,T.x,C.k,w.gM]}),n})();var d=c(7155),ce=c(5828),le=c(1572);function ae(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"generic-button",1),e.NdJ("clicked",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.isEdit=!s.isEdit)}),e.qZA()}2&n&&e.Q6J("type","cancelEdit")("classButton","d-block mat-elevation-z3 bef bef-btnOutline-btnBG bef-bc-btnBG bef-bW-btnBG bef-bS-solid bef-text-mainText bef-textHover-mainBG bef-cursor-pointer bef-r-100per bef-fs-1_5rem bef-h-2_5rem bef-w-2_5rem p-0")("customHtml","X")("disabledClassButton","d-block bef bef-btnOutline-btnBG__OPA__0_66 bef-bc-btnBG bef-bW-btnBG bef-bS-solid bef-text-mainText bef-textHover-mainBG bef-cursor-pointer bef-r-100per bef-fs-1_5rem bef-h-2_5rem bef-w-2_5rem p-0")("tooltip","Cancelar edici\xf3n")("tooltipPosition","left")("showTooltip",!0)("tooltipClass","bef bef-r-1rem bef-text-mainBG bef-bg-btnBG bef-p-1rem")}function pe(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"generic-table",15),e.NdJ("doAction",function(s){e.CHM(t);const o=e.oxw(2);return e.KtG(o.doAction(s))})("changePage",function(s){e.CHM(t);const o=e.oxw(2);return e.KtG(o.changePage(s))})("changePageSize",function(s){e.CHM(t);const o=e.oxw(2);return e.KtG(o.changePageSize(s))})("sorted",function(s){e.CHM(t);const o=e.oxw(2);return e.KtG(o.getSort(s))})("clicked",function(s){e.CHM(t);const o=e.oxw(2);return e.KtG(o.clickedButton(s))})("changesInput",function(s){e.CHM(t);const o=e.oxw(2);return e.KtG(o.changesInput(s))})("buttonId",function(s){e.CHM(t);const o=e.oxw(2);return e.KtG(o.buttonId(s))})("recoverThing",function(s){e.CHM(t);const o=e.oxw(2);return e.KtG(o.recoverThing(s))})("recoverSelected",function(s){e.CHM(t);const o=e.oxw(2);return e.KtG(o.recoverSelected(s))}),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("displayedColumns",t.displayedColumns)("dataSource",t.ELEMENT_DATA)("actions",t.actions)("currentPage",t.currentPage)("pages",t.getPages())("pageSize",t.pageSize)("type",t.type)("specialColumns",t.specialColumns)("getSpecialCell",t.getSpecialCell)("customHtml",t.getHTML)("storedSpecialCells",t.storedSpecialCells)("currentSort",t.currentSort)}}function ue(n,r){1&n&&(e.TgZ(0,"h2",16),e._uU(1,"No hay Data"),e.qZA(),e.TgZ(2,"p",17),e._uU(3," Trata buscando algo m\xe1s. "),e.qZA())}function be(n,r){if(1&n&&(e.ynx(0),e.YNc(1,pe,1,12,"generic-table",13),e.YNc(2,ue,4,0,"ng-template",null,14,e.W1O),e.BQk()),2&n){const t=e.MAs(3),i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.ELEMENT_DATA.length>0)("ngIfElse",t)}}function fe(n,r){1&n&&(e.TgZ(0,"h2",16),e._uU(1,"Cargando lista"),e.qZA(),e._UZ(2,"mat-spinner",18))}function _e(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",19),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.showOptions=!s.showOptions)}),e.qZA()}}function me(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",22)(1,"span",23),e._uU(2),e.qZA(),e.TgZ(3,"generic-button",12),e.NdJ("clicked",function(s){e.CHM(t);const o=e.oxw(2);return e.KtG(o.clickedButton(s))}),e.qZA()()}if(2&n){const t=r.$implicit;e.xp6(2),e.hij(" ",t.text," "),e.xp6(1),e.Q6J("type",t.click)("classButton","d-block mat-elevation-z3 bef bef-btn-btnBG bef-text-mainBG bef-cursor-pointer bef-r-100per bef-fs-2_5rem bef-h-3rem bef-w-3rem")("customHtml",t.icon)("disabledClassButton","d-block bef bef-btn-btnBG__OPA__0_66 bef-text-mainBG bef-cursor-pointer bef-r-100per bef-fs-3rem bef-h-3_5rem bef-w-3_5rem")("tooltip",t.text)("tooltipPosition","left")("showTooltip",!0)("tooltipClass","bef bef-r-1rem bef-text-mainBG bef-bg-btnBG bef-p-1rem")("matButtonType","icon")}}function de(n,r){if(1&n&&(e.TgZ(0,"div",20),e.YNc(1,me,4,10,"div",21),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.options)}}const ge=function(){return["/"]};let k=(()=>{class n{constructor(t,i,s,o){this.location=t,this._router=i,this._sharedService=s,this._userService=o,this.users=[],this.ELEMENT_DATA=[],this.dataSource=new d.by(this.users),this.isEdit=!1,this.displayedColumns=["name","tickets","email"],this.actions=[],this.currentPage=1,this.pages=1,this.pageSize=10,this.type="user",this.specialColumns=[],this.getSpecialCell=p=>{let f=this.storedSpecialCells.find(u=>p===u.value);if(f)return f.cell;{let u={type:"customHtml",thing:p};return!0===p.includes("Button")&&(u.type="button",u.object={type:p,classButton:"btn btn-primary",disabled:!1}),this.storedSpecialCells.push({value:p,cell:u,index:this.storedSpecialCells.length}),u}},this.storedSpecialCells=[],this.currentSort="_id",this.loadingData=!1,this.showOptions=!1,this.options=[{id:"create",icon:this.getHTML("create"),show:!0,text:"Crear nuevo usuario",click:"create"}]}ngOnInit(){this.getData(),this.cssCreate()}getData(){this.loadingData=!0,this.ELEMENT_DATA=[],this._userService.getUsers(this.currentPage,this.pageSize).subscribe({next:t=>{this.users=t.users,this.ELEMENT_DATA=this.users.map(i=>({_id:i?._id,name:i?.name,tickets:`\n            <ul class="list-group list-group-numbered">\n            ${i.tickets.map(s=>`\n                <li class="list-group-item">\n                  <ul class="list-group list-group-horizontal">\n                    <li class="list-group-item">Evento: ${s.evento?.title}</li>\n                    <li class="list-group-item">Role: ${s.role}</li>\n                  </ul>\n                </li>\n                `).join("")}\n            </ul>\n            `,email:i?.email})),this.dataSource=new d.by(this.ELEMENT_DATA),this.pages=t.pages,this.loadingData=!1},error:t=>{this._sharedService.consoleParser({thing:t,type:"error"}),this.ELEMENT_DATA=[],this.dataSource=new d.by(this.ELEMENT_DATA),this.loadingData=!1}})}getPages(){let t=[];for(let i=1;i<=this.pages;i++)t.push(i);return t}doAction(t){this._sharedService.consoleLog(t)}changePage(t){this.currentPage=t,this.getData()}changePageSize(t){this.pageSize=t,this.currentPage=1}getSort(t){this.currentSort="desc"===t.direction?"-"+t.active:t.active}clickedButton(t){switch(t){case"edit":this.isEdit=!0,this.showOptions=!1;break;case"create":this._router.navigate(["/user/user"]),this.showOptions=!1}}changesInput(t){this._sharedService.consoleLog(t)}buttonId(t){this._sharedService.consoleLog(t)}recoverThing(t){this._sharedService.consoleLog(t)}recoverSelected(t){this._sharedService.consoleLog(t),this._router.navigate(["/user/user",t._id])}getHTML(t){return this._sharedService.getHTML(t)}returnToPreviousPage(){this.location.back()}cssCreate(){this._sharedService.cssCreate()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(l.Ye),e.Y36(a.F0),e.Y36(h.F),e.Y36(x.K))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-user-list"]],decls:15,vars:27,consts:[[1,"d-flex","mx-auto","flex-wrap","justify-content-between","align-items-center","bef","bef-w-calcSD100per__MIN__2remED"],[3,"type","classButton","customHtml","disabledClassButton","tooltip","tooltipPosition","showTooltip","tooltipClass","clicked"],["href","/","rel","noopener noreferrer",3,"routerLink","matTooltip"],[3,"logoHeight","logoWidth"],[1,"bef","bef-w-2_5rem","bef-h-2_5rem"],[3,"type","classButton","customHtml","disabledClassButton","tooltip","tooltipPosition","showTooltip","tooltipClass","clicked",4,"ngIf"],[1,"bef","bef-fs-2rem","fw-bold","mx-auto","text-break","my-0","bef-mt-md-3rem","text-start","bef-textAlign-md-center"],[4,"ngIf","ngIfElse"],["elseLoadingDataTemplate",""],["class","position-fixed bef bef-t-0 bef-b-0 bef-w-100vw bef-h-100vh bef-bg-mainText__OPA__0_25 bef-z-9",3,"click",4,"ngIf"],[1,"position-fixed","bef","bef-b-2rem","bef-e-2rem","bef-z-10","d-flex","flex-column","align-items-end","bef-g-1rem"],["class","d-flex flex-column bef bef-g-1rem",4,"ngIf"],[3,"type","classButton","customHtml","disabledClassButton","tooltip","tooltipPosition","showTooltip","tooltipClass","matButtonType","clicked"],["class","d-block bef bef-mx-2rem",3,"displayedColumns","dataSource","actions","currentPage","pages","pageSize","type","specialColumns","getSpecialCell","customHtml","storedSpecialCells","currentSort","doAction","changePage","changePageSize","sorted","clicked","changesInput","buttonId","recoverThing","recoverSelected",4,"ngIf","ngIfElse"],["elseNoDataTemplate",""],[1,"d-block","bef","bef-mx-2rem",3,"displayedColumns","dataSource","actions","currentPage","pages","pageSize","type","specialColumns","getSpecialCell","customHtml","storedSpecialCells","currentSort","doAction","changePage","changePageSize","sorted","clicked","changesInput","buttonId","recoverThing","recoverSelected"],[1,"text-center","my-3","bef","bef-text-mainText","fw-bold"],[1,"text-center"],[1,"d-block","mx-auto"],[1,"position-fixed","bef","bef-t-0","bef-b-0","bef-w-100vw","bef-h-100vh","bef-bg-mainText__OPA__0_25","bef-z-9",3,"click"],[1,"d-flex","flex-column","bef","bef-g-1rem"],["class","d-flex flex-row justify-content-end align-items-center bef bef-g-1rem",4,"ngFor","ngForOf"],[1,"d-flex","flex-row","justify-content-end","align-items-center","bef","bef-g-1rem"],[1,"bef","bef-text-mainBG"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"generic-button",1),e.NdJ("clicked",function(){return i.returnToPreviousPage()}),e.qZA(),e.TgZ(2,"a",2),e._UZ(3,"logo-show",3),e.qZA(),e.TgZ(4,"div",4),e.YNc(5,ae,1,8,"generic-button",5),e.qZA()(),e.TgZ(6,"h1",6),e._uU(7," Lista de usuarios\n"),e.qZA(),e.YNc(8,be,4,2,"ng-container",7),e.YNc(9,fe,3,0,"ng-template",null,8,e.W1O),e.YNc(11,_e,1,0,"div",9),e.TgZ(12,"div",10),e.YNc(13,de,2,1,"div",11),e.TgZ(14,"generic-button",12),e.NdJ("clicked",function(){return i.showOptions=!i.showOptions}),e.qZA()()),2&t){const s=e.MAs(10);e.xp6(1),e.Q6J("type","return")("classButton","d-block mat-elevation-z3 bef bef-btnOutline-btnBG bef-bc-btnBG bef-bW-btnBG bef-bS-solid bef-text-mainText bef-textHover-mainBG bef-cursor-pointer bef-r-100per bef-fs-2rem bef-h-2_5rem bef-w-2_5rem p-0")("customHtml",i.getHTML("back"))("disabledClassButton","d-block bef bef-btnOutline-btnBG__OPA__0_66 bef-bc-btnBG bef-bW-btnBG bef-bS-solid bef-text-mainText bef-textHover-mainBG bef-cursor-pointer bef-r-100per bef-fs-2rem bef-h-2_5rem bef-w-2_5rem p-0")("tooltip","Regresar")("tooltipPosition","left")("showTooltip",!0)("tooltipClass","bef bef-r-1rem bef-text-mainBG bef-bg-btnBG bef-p-1rem"),e.xp6(1),e.Q6J("routerLink",e.DdM(26,ge))("matTooltip","Inicio"),e.xp6(1),e.Q6J("logoHeight","3rem")("logoWidth","3rem"),e.xp6(2),e.Q6J("ngIf",!!i.isEdit),e.xp6(3),e.Q6J("ngIf",!i.loadingData)("ngIfElse",s),e.xp6(3),e.Q6J("ngIf",!!i.showOptions),e.xp6(2),e.Q6J("ngIf",!!i.showOptions),e.xp6(1),e.Q6J("type","Show Options")("classButton","d-block mat-elevation-z3 bef bef-btn-btnBG bef-text-mainBG bef-cursor-pointer bef-r-100per bef-fs-3rem bef-h-3_5rem bef-w-3_5rem")("customHtml","+")("disabledClassButton","d-block bef bef-btn-btnBG__OPA__0_66 bef-text-mainBG bef-cursor-pointer bef-r-100per bef-fs-3rem bef-h-3_5rem bef-w-3_5rem")("tooltip","Show Options")("tooltipPosition","left")("showTooltip",!0)("tooltipClass","bef bef-r-1rem bef-text-mainBG bef-bg-btnBG bef-p-1rem")("matButtonType","icon")}},dependencies:[l.sg,l.O5,a.rH,ce.p,T.x,C.k,le.Ou,w.gM]}),n})();var y=c(493);const he=[{path:"user",component:B},{path:"user/:id",component:B},{path:"user-list",component:k,canActivate:[()=>(0,y.$)()]},{path:"user-list/:page",component:k,canActivate:[()=>(0,y.$)()]}];let xe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[a.Bz.forChild(he),a.Bz]}),n})();var Te=c(3588);let Ce=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[l.ez,xe,Te.m]}),n})()}}]);