"use strict";(self.webpackChunkAgentaEventos_app=self.webpackChunkAgentaEventos_app||[]).push([[764],{8764:(ii,Q,a)=>{a.r(Q),a.d(Q,{EventoModule:()=>Vt});var _=a(6895),d=a(5588);function L(n,r,t,i,o,s,c){try{var f=n[s](c),l=f.value}catch(u){return void t(u)}f.done?r(l):Promise.resolve(l).then(i,o)}function K(n){return function(){var r=this,t=arguments;return new Promise(function(i,o){var s=n.apply(r,t);function c(l){L(s,i,o,c,f,"next",l)}function f(l){L(s,i,o,c,f,"throw",l)}c(void 0)})}}var y=a(2340),ie=a(6805),ne=a(930);function C(n,r){const t="object"==typeof r;return new Promise((i,o)=>{const s=new ne.Hp({next:c=>{i(c),s.unsubscribe()},error:o,complete:()=>{t?i(r.defaultValue):o(new ie.K)}});n.subscribe(s)})}class Y{constructor(r,t,i,o,s,c,f,l,u,x,T,w,k,J,N,O,H,M,F,D,q,P,Rt,Wt,Xt,ei,ti){this._id=r,this.logo=t,this.headerImage=i,this.description=o,this.title=s,this.subtitle=c,this.activities=f,this.califications=l,this.witness=u,this.asistents=x,this.operators=T,this.ticketTypes=w,this.photos=k,this.date=J,this.place=N,this.titleColor=O,this.textColor=H,this.linkColor=M,this.bgColor=F,this.tickets=D,this.createAt=q,this.changeDate=P,this.changeUser=Rt,this.changeType=Wt,this.ver=Xt,this.isDeleted=ei,this.changeHistory=ti}}class E{constructor(r,t,i,o,s,c,f,l,u,x,T,w,k,J,N,O,H,M,F,D,q,P){this._id=r,this.ticketType=t,this.title=i,this.subtitle=o,this.description=s,this.headerImage=c,this.photos=f,this.califications=l,this.witness=u,this.date=x,this.place=T,this.titleColor=w,this.textColor=k,this.linkColor=J,this.bgColor=N,this.createAt=O,this.changeDate=H,this.changeUser=M,this.changeType=F,this.ver=D,this.isDeleted=q,this.changeHistory=P}}class B{constructor(r,t,i,o,s,c,f,l,u,x,T,w,k){this._id=r,this.type=t,this.evento=i,this.user=o,this.role=s,this.activitiesAdmin=c,this.createAt=f,this.changeDate=l,this.changeUser=u,this.changeType=x,this.ver=T,this.isDeleted=w,this.changeHistory=k}}var g=a(8224),$=a(8486),oe=a(1818),se=a(5226),p=a.n(se),e=a(4650),A=a(9167),re=a(529);let Z=(()=>{class n{constructor(t){this._http=t,this.url=y.N.api+"/evento/"}createActivity(t,i){return this._http.post(`${this.url}activity/${i}`,JSON.stringify(t))}createCalification(t,i,o){return this._http.post(`${this.url}calification/${i}/${o}`,JSON.stringify(t))}createEvento(t){return this._http.post(`${this.url}evento`,JSON.stringify(t))}createTicket(t,i,o){return this._http.post(`${this.url}ticket/${i}/${o}`,JSON.stringify(t))}getEvento(t){return this._http.get(`${this.url}evento/${t}`)}getEventos(t,i=5,o="_id",s="all",c=""){return this._http.get(`${this.url}eventos/${t}/${i}/${o}/${s}/${c}`)}getActivity(t,i=!1){return this._http.get(`${this.url}activity/${t}${i?`/${i}`:""}`)}updateActivity(t,i="update"){return this._http.put(`${this.url}activity/${i}`,JSON.stringify(t))}updateCalification(t,i="update"){return this._http.put(`${this.url}calification/${i}`,JSON.stringify(t))}updateEvento(t,i="update"){return this._http.put(`${this.url}evento/${i}`,JSON.stringify(t))}updateTicket(t,i="update"){return this._http.put(`${this.url}ticket/${i}`,JSON.stringify(t))}deleteFile(t,i,o,s){return this._http.delete(`${this.url}file/${t}/${i}/${o}/${s}`)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(re.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var ce=a(427),ae=a(9653),U=a(3882),G=a(8807),z=a(6189),j=a(6180),V=a(3848),R=a(266),W=a(7331),X=a(5940);function le(n,r){if(1&n&&(e._UZ(0,"img",10),e.ALo(1,"safeHtml")),2&n){const t=e.oxw();e.s9C("alt",t.activity.headerImage.title),e.Q6J("src",e.xi3(1,2,t.url+"file/"+t.activity.headerImage.location,"url"),e.LSH)}}const pe=function(n){return{Authorization:n}},_e=function(n,r){return{type:"uploadAll",url:n,method:"POST",headers:r}},fe=function(){return["image/jpeg","image/jpg","image/png","image/webp"]},ue=function(n){return{concurrency:1,maxUploads:1,maxFileSize:5e8,allowedContentTypes:n}};function de(n,r){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"file-uploader",11),e.NdJ("recoverThing",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s.activityEdited.emit(o))}),e.qZA(),e.BQk()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("uploadInputConfig",e.WLB(9,_e,t.url+"files/activity/headerImage/"+t.activity._id,e.VKq(7,pe,t.token)))("options",e.VKq(13,ue,e.DdM(12,fe)))("uploaderId","headerImageEvento")("uploaderBehaviour","ShowFiles&ShowUploadButton")("dragNdropActive",!0)("customHtml","Subir imagen de cabecera")("tooltip","Subir archivo de cabecera del evento")}}const h="d-block mx-auto fw-bold bef bef-text-danger bef-my-1rem",be=function(){return{text:"El t\xedtulo de la actividad es necesario.",evalThing:"required",spanClass:h}},v=function(n){return[n]};function me(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",12)(1,"generic-input",13),e.NdJ("changesInput",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s.changesInput(o))}),e.qZA(),e.TgZ(2,"generic-button",14),e.NdJ("clicked",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s.changeChangers(o))}),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("labelTitle","T\xedtulo de la actividad")("placeholder",t.activity.title)("thingFather",t.activity)("thing","title")("type","text")("spans",e.VKq(17,v,e.DdM(16,be)))("required",!0),e.xp6(1),e.Q6J("type","title")("classButton","d-block mat-elevation-z3 bef bef-btn-btnBG bef-text-mainBG bef-r-0_25rem bef-cursor-pointer bef-r-100per bef-fs-1rem bef-h-2_5rem bef-w-2_5rem")("customHtml","X")("disabledClassButton","d-block bef bef-btn-btnBG__OPA__0_66 bef-text-mainBG bef-r-0_25rem bef-cursor-pointer bef-r-100per bef-fs-3rem bef-h-3_5rem bef-w-3_5rem")("tooltip","Cancelar edici\xf3n")("tooltipPosition","left")("showTooltip",!0)("tooltipClass","bef bef-r-1rem bef-text-mainBG bef-bg-btnBG bef-p-1rem")("matButtonType","icon")}}function ge(n,r){if(1&n){const t=e.EpF();e.O4$(),e.TgZ(0,"svg",17),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.changeChangers("title"))}),e._UZ(1,"path",18),e.qZA()}}function he(n,r){if(1&n&&(e.TgZ(0,"h1",15),e._uU(1),e.YNc(2,ge,2,0,"svg",16),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.hij(" ",t.activity.title," "),e.xp6(1),e.Q6J("ngIf",!!t.isEdit)}}const ve=function(){return{text:"El subt\xedtulo de la actividad es necesario.",evalThing:"required",spanClass:h}};function xe(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",12)(1,"generic-input",13),e.NdJ("changesInput",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s.changesInput(o))}),e.qZA(),e.TgZ(2,"generic-button",14),e.NdJ("clicked",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s.changeChangers(o))}),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("labelTitle","Subt\xedtulo de la actividad")("placeholder",t.activity.subtitle)("thingFather",t.activity)("thing","subtitle")("type","text")("spans",e.VKq(17,v,e.DdM(16,ve)))("required",!0),e.xp6(1),e.Q6J("type","subtitle")("classButton","d-block mat-elevation-z3 bef bef-btn-btnBG bef-text-mainBG bef-r-0_25rem bef-cursor-pointer bef-r-100per bef-fs-1rem bef-h-2_5rem bef-w-2_5rem")("customHtml","X")("disabledClassButton","d-block bef bef-btn-btnBG__OPA__0_66 bef-text-mainBG bef-r-0_25rem bef-cursor-pointer bef-r-100per bef-fs-3rem bef-h-3_5rem bef-w-3_5rem")("tooltip","Cancelar edici\xf3n")("tooltipPosition","left")("showTooltip",!0)("tooltipClass","bef bef-r-1rem bef-text-mainBG bef-bg-btnBG bef-p-1rem")("matButtonType","icon")}}function Te(n,r){if(1&n){const t=e.EpF();e.O4$(),e.TgZ(0,"svg",21),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.changeChangers("subtitle"))}),e._UZ(1,"path",18),e.qZA()}}function we(n,r){if(1&n&&(e.TgZ(0,"h2",19),e._uU(1),e.YNc(2,Te,2,0,"svg",20),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.hij(" ",t.activity.subtitle," "),e.xp6(1),e.Q6J("ngIf",!!t.isEdit)}}const ke=function(){return{text:"La fecha de la actividad es necesaria.",evalThing:"required",spanClass:h}},ye=function(){return{text:"El lugar de la actividad es necesario.",evalThing:"required",spanClass:h}};function Ce(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"generic-input",22),e.NdJ("changesInput",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s.changesInput(o))}),e.ALo(2,"date"),e.qZA(),e.TgZ(3,"generic-input",22),e.NdJ("changesInput",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s.changesInput(o))}),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("inputClasses","form-control bef bef-mb-2rem")("labelTitle","Fecha de la actividad")("placeholder",e.xi3(2,16,t.activity.date,"dd/MM/yyyy hh:mm"))("thingFather",t.activity)("thing","date")("type","date&&time")("spans",e.VKq(20,v,e.DdM(19,ke)))("required",!0),e.xp6(2),e.Q6J("inputClasses","form-control bef bef-mb-2rem")("labelTitle","Lugar de la actividad")("placeholder",t.activity.place)("thingFather",t.activity)("thing","place")("type","text")("spans",e.VKq(23,v,e.DdM(22,ye)))("required",!0)}}const Ee=function(){return{text:"La descripci\xf3n de la actividad es necesaria.",evalThing:"required",spanClass:h}};function Be(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",12)(1,"generic-input",13),e.NdJ("changesInput",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s.changesInput(o))}),e.qZA(),e.TgZ(2,"generic-button",14),e.NdJ("clicked",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s.changeChangers(o))}),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("labelTitle","Descripci\xf3n")("placeholder","Descripci\xf3n")("thingFather",t.activity)("thing","description")("type","textarea")("spans",e.VKq(17,v,e.DdM(16,Ee)))("required",!0),e.xp6(1),e.Q6J("type","description")("classButton","d-block mat-elevation-z3 bef bef-btn-btnBG bef-text-mainBG bef-r-0_25rem bef-cursor-pointer bef-r-100per bef-fs-1rem bef-h-2_5rem bef-w-2_5rem")("customHtml","X")("disabledClassButton","d-block bef bef-btn-btnBG__OPA__0_66 bef-text-mainBG bef-r-0_25rem bef-cursor-pointer bef-r-100per bef-fs-3rem bef-h-3_5rem bef-w-3_5rem")("tooltip","Cancelar edici\xf3n")("tooltipPosition","left")("showTooltip",!0)("tooltipClass","bef bef-r-1rem bef-text-mainBG bef-bg-btnBG bef-p-1rem")("matButtonType","icon")}}function Ae(n,r){if(1&n){const t=e.EpF();e.O4$(),e.TgZ(0,"svg",21),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.changeChangers("description"))}),e._UZ(1,"path",18),e.qZA()}}function Ze(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"p",23),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.changeChangers("description"))}),e._UZ(1,"span",24),e.ALo(2,"safeHtml"),e.YNc(3,Ae,2,0,"svg",20),e.qZA()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("innerHTML",e.lcZ(2,2,t.activity.description),e.oJD),e.xp6(2),e.Q6J("ngIf",!!t.isEdit)}}function Ge(n,r){if(1&n&&(e.TgZ(0,"div"),e._UZ(1,"img",27),e.ALo(2,"safeHtml"),e.qZA()),2&n){const t=r.$implicit,i=e.oxw(2);e.xp6(1),e.s9C("alt",t.title),e.Q6J("src",e.xi3(2,2,i.url+"file/"+t.location,"url"),e.LSH)}}function Ie(n,r){if(1&n&&(e.TgZ(0,"div")(1,"h3",25),e._uU(2," Fotos del activity "),e.qZA(),e.YNc(3,Ge,3,5,"div",26),e.qZA()),2&n){const t=e.oxw();e.xp6(3),e.Q6J("ngForOf",t.activity.photos)}}function Se(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"h3",25),e._uU(2," Ticket "),e.qZA(),e.TgZ(3,"generic-input",28),e.NdJ("clicked",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s.clicked(o))}),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(3),e.Q6J("placeholder",t.activity.ticketType)("thingFather",t.activity)("thing","ticketType")("type","select")("options",t.ticketTypesOptions)}}function Je(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"generic-button",29),e.NdJ("clicked",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onSubmit())}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("type","Editar")("classButton","d-block mx-auto mat-elevation-z3 bef bef-my-2rem bef-btn-btnBG bef-text-mainBG bef-cursor-pointer bef-r-0_25rem bef-fs-1rem")("customHtml",""!==t.activity._id?"Actualizar cambios en la actividad":"Crear actividad")("disabledClassButton","d-block mx-auto bef bef-my-2rem bef-btn-btnBG__OPA__0_5 bef-text-mainBG bef-r-0_25rem bef-cursor-pointer bef-fs-1rem")("tooltip",""!==t.activity._id?"Actualizar cambios en la actividad":"Crear actividad")("tooltipPosition","left")("showTooltip",!0)("tooltipClass","bef bef-r-1rem bef-text-mainBG bef-bg-btnBG bef-p-1rem")("matButtonType","raised")("disabled",!t.checkIfFormValid())}}let Ne=(()=>{class n{constructor(t,i){this._sharedService=t,this._eventoService=i,this.url=y.N.api+"/evento/",this.ticketTypes=1,this.isEdit=!1,this.eventoId="",this.token="",this.activityEdited=new e.vpe,this.ticketTypesOptions=this.getTicketTypesOptions(),this.lockeds={title:""!==this.activity?.title},this.changers=[]}ngOnInit(){this.cssCreate()}ngOnChanges(t){t.ticketTypes&&t.ticketTypes.currentValue!==t.ticketTypes.previousValue&&(this.ticketTypesOptions=this.getTicketTypesOptions(),this.cssCreate())}onSubmit(){p().fire({title:"\xbfQuieres guardar los cambios?",icon:"warning",showDenyButton:!0,confirmButtonText:"Si",denyButtonText:"No"}).then(t=>{t.isConfirmed?""!==this.activity._id?this._eventoService.updateActivity(this.activity).subscribe({next:i=>{this._sharedService.consoleParser({thing:i,type:"log"}),this.activity=i.activity?i.activity:this.activity,this.activityEdited.emit(),this.cssCreate(),p().fire("Se guardaron los cambios","","success")},error:i=>{this._sharedService.consoleParser({type:"error",thing:i}),p().fire("Error al guardar la informaci\xf3n de la actividad.",i.toString(),"error")}}):this._eventoService.createActivity(this.activity,this.eventoId).subscribe({next:i=>{this._sharedService.consoleParser({thing:i,type:"log"}),this.activity=i.activity?i.activity:this.activity,this.activityEdited.emit(),this.cssCreate(),p().fire("Se guardaron los cambios","","success")},error:i=>{this._sharedService.consoleParser({type:"error",thing:i}),p().fire("Error al guardar la informaci\xf3n de la actividad.",i.toString(),"error")}}):p().fire("No se guardaron los cambios","","info")})}getTicketTypesOptions(){return Array.from(Array(6).keys()).filter(t=>t<=this.ticketTypes).map(t=>({type:"menuitem",option:`${t}`,click:`ticketTypes=${t}`}))}clicked(t){!0===t.click.includes("ticketType")&&(this.activity.ticketType=parseInt(t.click.split("=")[1]))}changeChangers(t){if(this.isEdit)if(this.changers.includes(t)){let i=this.changers.indexOf(t);this.changers.splice(i,1)}else this.changers.push(t)}changesInput(t){Object.keys(this.lockeds).forEach(i=>{this.lockeds[i]=t[i]?t.locked:this.lockeds[i]}),this.checkIfFormValid()&&this.cssCreate()}checkIfFormValid(){return Object.values(this.lockeds).every(t=>!1===t)}cssCreate(){this._sharedService.cssCreate()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(A.F),e.Y36(Z))},n.\u0275cmp=e.Xpm({type:n,selectors:[["activity"]],inputs:{activity:"activity",ticketTypes:"ticketTypes",isEdit:"isEdit",eventoId:"eventoId",token:"token",evento:"evento"},outputs:{activityEdited:"activityEdited"},features:[e.TTD],decls:22,vars:17,consts:[[1,"mx-auto","bef","bef-w-calcSD100per__MIN__2remED","bef-hmn-100vh"],["class","bef bef-w-100per bef-hmx-20rem bef-objectFit-cover bef-objectPosition-center bef-r-0_125rem",3,"src","alt",4,"ngIf"],[4,"ngIf"],["class","d-flex flex-wrap justify-content-between align-items-end bef bef-my-2rem",4,"ngIf","ngIfElse"],["elseEditTitleTemplate",""],["elseEditSubTitleTemplate",""],[1,"d-flex","w-100","bef","bef-w-md-75per","mx-auto","my-0","bef-my-md-3rem","justify-content-start","justify-content-md-between"],[1,"bef","bef-bg-resaltaBG","bef-text-mainBG"],["elseEditDescriptionTemplate",""],[3,"type","classButton","customHtml","disabledClassButton","tooltip","tooltipPosition","showTooltip","tooltipClass","matButtonType","disabled","clicked",4,"ngIf"],[1,"bef","bef-w-100per","bef-hmx-20rem","bef-objectFit-cover","bef-objectPosition-center","bef-r-0_125rem",3,"src","alt"],[3,"uploadInputConfig","options","uploaderId","uploaderBehaviour","dragNdropActive","customHtml","tooltip","recoverThing"],[1,"d-flex","flex-wrap","justify-content-between","align-items-end","bef","bef-my-2rem"],[1,"bef","bef-w-calcSD100per__MIN__3remED",3,"labelTitle","placeholder","thingFather","thing","type","spans","required","changesInput"],[3,"type","classButton","customHtml","disabledClassButton","tooltip","tooltipPosition","showTooltip","tooltipClass","matButtonType","clicked"],[1,"bef","bef-fs-2rem","fw-bold","mx-auto","text-break","my-0","bef-mt-md-3rem","text-start","bef-textAlign-md-center"],["xmlns","http://www.w3.org/2000/svg","width","32","height","32","fill","currentColor","class","bi bi-pencil","viewBox","0 0 16 16",3,"click",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","width","32","height","32","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-pencil",3,"click"],["d","M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168l10-10zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207 11.207 2.5zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293l6.5-6.5zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325z"],[1,"text-start","bef","bef-textAlign-md-center","my-0","bef-mb-md-3rem"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","class","bi bi-pencil","viewBox","0 0 16 16",3,"click",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-pencil",3,"click"],[3,"inputClasses","labelTitle","placeholder","thingFather","thing","type","spans","required","changesInput"],[1,"w-100","bef","bef-w-md-75per","mx-auto","text-start","bef","bef-textAlign-md-center",3,"click"],[3,"innerHTML"],[1,"fw-bold","text-start","bef","bef-textAlign-md-center","my-0","bef-mt-md-3rem","bef-mb-md-1rem"],[4,"ngFor","ngForOf"],[1,"bef","bef-w-clampSD200pxCOM50perCOM500pxED","bef-hmx-20rem","bef-objectFit-cover","bef-objectPosition-center","bef-r-0_125rem",3,"src","alt"],[3,"placeholder","thingFather","thing","type","options","clicked"],[3,"type","classButton","customHtml","disabledClassButton","tooltip","tooltipPosition","showTooltip","tooltipClass","matButtonType","disabled","clicked"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0),e.YNc(1,le,2,5,"img",1),e.YNc(2,de,2,15,"ng-container",2),e.YNc(3,me,3,19,"div",3),e.YNc(4,he,3,2,"ng-template",null,4,e.W1O),e.YNc(6,xe,3,19,"div",3),e.YNc(7,we,3,2,"ng-template",null,5,e.W1O),e.TgZ(9,"div",6)(10,"mat-chip",7),e._uU(11),e.ALo(12,"date"),e.qZA(),e.TgZ(13,"mat-chip",7),e._uU(14),e.qZA()(),e.YNc(15,Ce,4,25,"div",2),e.YNc(16,Be,3,19,"div",3),e.YNc(17,Ze,4,4,"ng-template",null,8,e.W1O),e.YNc(19,Ie,4,1,"div",2),e.YNc(20,Se,4,5,"div",2),e.YNc(21,Je,1,10,"generic-button",9),e.qZA()),2&t){const o=e.MAs(5),s=e.MAs(8),c=e.MAs(18);e.xp6(1),e.Q6J("ngIf",!!i.activity.headerImage),e.xp6(1),e.Q6J("ngIf",!!i.isEdit&&""!==i.activity._id),e.xp6(1),e.Q6J("ngIf",(i.changers.includes("title")||""===i.activity.title)&&!0===i.isEdit)("ngIfElse",o),e.xp6(3),e.Q6J("ngIf",(i.changers.includes("subtitle")||""===i.activity.subtitle)&&!0===i.isEdit)("ngIfElse",s),e.xp6(5),e.hij(" ",e.xi3(12,14,i.activity.date,"dd/MM/yyyy hh:mm")," "),e.xp6(3),e.hij(" ",i.activity.place," "),e.xp6(1),e.Q6J("ngIf",!!i.isEdit),e.xp6(1),e.Q6J("ngIf",(i.changers.includes("description")||""===i.activity.description)&&!0===i.isEdit)("ngIfElse",c),e.xp6(3),e.Q6J("ngIf",!!i.activity.photos&&!!i.activity.photos[0]),e.xp6(1),e.Q6J("ngIf",!!i.isEdit),e.xp6(1),e.Q6J("ngIf",!!i.isEdit)}},dependencies:[_.sg,_.O5,U.V,G.x,z.G,W.HS,_.uU,X.z]}),n})();function Oe(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"generic-button",1),e.NdJ("clicked",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.isEdit=!o.isEdit)}),e.qZA()}2&n&&e.Q6J("type","cancelEdit")("classButton","d-block mat-elevation-z3 bef bef-btnOutline-btnBG bef-bc-btnBG bef-bW-btnBG bef-bS-solid bef-text-mainText bef-textHover-mainBG bef-cursor-pointer bef-r-100per bef-fs-1_5rem bef-h-2_5rem bef-w-2_5rem p-0")("customHtml","X")("disabledClassButton","d-block bef bef-btnOutline-btnBG__OPA__0_66 bef-bc-btnBG bef-bW-btnBG bef-bS-solid bef-text-mainText bef-textHover-mainBG bef-cursor-pointer bef-r-100per bef-fs-1_5rem bef-h-2_5rem bef-w-2_5rem p-0")("tooltip","Cancelar edici\xf3n")("tooltipPosition","left")("showTooltip",!0)("tooltipClass","bef bef-r-1rem bef-text-mainBG bef-bg-btnBG bef-p-1rem")}function He(n,r){if(1&n&&(e._UZ(0,"img",31),e.ALo(1,"safeHtml")),2&n){const t=e.oxw();e.s9C("alt",t.evento.headerImage.title),e.Q6J("src",e.xi3(1,2,t.url+"file/"+t.evento.headerImage.location,"url"),e.LSH)}}const Me=function(n){return{Authorization:n}},Fe=function(n,r){return{type:"uploadAll",url:n,method:"POST",headers:r}},De=function(){return["image/jpeg","image/jpg","image/png","image/webp"]},qe=function(n){return{concurrency:1,maxUploads:1,maxFileSize:5e8,allowedContentTypes:n}};function Pe(n,r){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"file-uploader",32),e.NdJ("recoverThing",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.getData(o.evento._id))}),e.qZA(),e.BQk()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("uploadInputConfig",e.WLB(9,Fe,t.url+"files/evento/headerImage/"+t.evento._id,e.VKq(7,Me,t.token)))("options",e.VKq(13,qe,e.DdM(12,De)))("uploaderId","headerImageEvento")("uploaderBehaviour","ShowFiles&ShowUploadButton")("dragNdropActive",!0)("customHtml","Subir imagen de cabecera")("tooltip","Subir archivo de cabecera del evento")}}const b="d-block mx-auto fw-bold bef bef-text-danger bef-my-1rem",Qe=function(){return{text:"El t\xedtulo del evento es necesario.",evalThing:"required",spanClass:b}},m=function(n){return[n]};function Le(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",33)(1,"generic-input",34),e.NdJ("changesInput",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s.changesInput(o))}),e.qZA(),e.TgZ(2,"generic-button",35),e.NdJ("clicked",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s.changeChangers(o))}),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("labelTitle","T\xedtulo de evento")("placeholder",t.evento.title)("thingFather",t.evento)("thing","title")("type","text")("spans",e.VKq(17,m,e.DdM(16,Qe)))("required",!0),e.xp6(1),e.Q6J("type","title")("classButton","d-block mat-elevation-z3 bef bef-btn-btnBG bef-text-mainBG bef-cursor-pointer bef-r-100per bef-fs-1rem bef-h-2_5rem bef-w-2_5rem")("customHtml","X")("disabledClassButton","d-block bef bef-btn-btnBG__OPA__0_66 bef-text-mainBG bef-cursor-pointer bef-r-100per bef-fs-3rem bef-h-3_5rem bef-w-3_5rem")("tooltip","Cancelar edici\xf3n")("tooltipPosition","left")("showTooltip",!0)("tooltipClass","bef bef-r-1rem bef-text-mainBG bef-bg-btnBG bef-p-1rem")("matButtonType","icon")}}function Ke(n,r){if(1&n){const t=e.EpF();e.O4$(),e.TgZ(0,"svg",38),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.changeChangers("title"))}),e._UZ(1,"path",39),e.qZA()}}function Ye(n,r){if(1&n&&(e.TgZ(0,"h1",36),e._uU(1),e.YNc(2,Ke,2,0,"svg",37),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.hij(" ",t.evento.title," "),e.xp6(1),e.Q6J("ngIf",!!t.isEdit)}}const $e=function(){return{text:"El subt\xedtulo del evento es necesario.",evalThing:"required",spanClass:b}};function Ue(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",33)(1,"generic-input",34),e.NdJ("changesInput",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s.changesInput(o))}),e.qZA(),e.TgZ(2,"generic-button",35),e.NdJ("clicked",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s.changeChangers(o))}),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("labelTitle","Subt\xedtulo de evento")("placeholder",t.evento.subtitle)("thingFather",t.evento)("thing","subtitle")("type","text")("spans",e.VKq(17,m,e.DdM(16,$e)))("required",!0),e.xp6(1),e.Q6J("type","subtitle")("classButton","d-block mat-elevation-z3 bef bef-btn-btnBG bef-text-mainBG bef-cursor-pointer bef-r-100per bef-fs-1rem bef-h-2_5rem bef-w-2_5rem")("customHtml","X")("disabledClassButton","d-block bef bef-btn-btnBG__OPA__0_66 bef-text-mainBG bef-cursor-pointer bef-r-100per bef-fs-3rem bef-h-3_5rem bef-w-3_5rem")("tooltip","Cancelar edici\xf3n")("tooltipPosition","left")("showTooltip",!0)("tooltipClass","bef bef-r-1rem bef-text-mainBG bef-bg-btnBG bef-p-1rem")("matButtonType","icon")}}function ze(n,r){if(1&n){const t=e.EpF();e.O4$(),e.TgZ(0,"svg",42),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.changeChangers("subtitle"))}),e._UZ(1,"path",39),e.qZA()}}function je(n,r){if(1&n&&(e.TgZ(0,"h2",40),e._uU(1),e.YNc(2,ze,2,0,"svg",41),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.hij(" ",t.evento.subtitle," "),e.xp6(1),e.Q6J("ngIf",!!t.isEdit)}}const Ve=function(){return{text:"La fecha del evento es necesaria.",evalThing:"required",spanClass:b}},Re=function(){return{text:"El lugar del evento es necesario.",evalThing:"required",spanClass:b}};function We(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"generic-input",43),e.NdJ("changesInput",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s.changesInput(o))}),e.ALo(2,"date"),e.qZA(),e.TgZ(3,"generic-input",43),e.NdJ("changesInput",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s.changesInput(o))}),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("inputClasses","form-control bef bef-mb-2rem")("labelTitle","Fecha del evento")("placeholder",e.xi3(2,16,t.evento.date,"dd/MM/YYYY HH:mm a"))("thingFather",t.evento)("thing","date")("type","date&&time")("spans",e.VKq(20,m,e.DdM(19,Ve)))("required",!0),e.xp6(2),e.Q6J("inputClasses","form-control bef bef-mb-2rem")("labelTitle","Lugar del evento")("placeholder",t.evento.place)("thingFather",t.evento)("thing","place")("type","text")("spans",e.VKq(23,m,e.DdM(22,Re)))("required",!0)}}const Xe=function(){return{text:"La descripci\xf3n del evento es necesaria.",evalThing:"required",spanClass:b}};function et(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",33)(1,"generic-input",34),e.NdJ("changesInput",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s.changesInput(o))}),e.qZA(),e.TgZ(2,"generic-button",35),e.NdJ("clicked",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s.changeChangers(o))}),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("labelTitle","Descripci\xf3n")("placeholder","Descripci\xf3n")("thingFather",t.evento)("thing","description")("type","textarea")("spans",e.VKq(17,m,e.DdM(16,Xe)))("required",!0),e.xp6(1),e.Q6J("type","description")("classButton","d-block mat-elevation-z3 bef bef-btn-btnBG bef-text-mainBG bef-cursor-pointer bef-r-100per bef-fs-1rem bef-h-2_5rem bef-w-2_5rem")("customHtml","X")("disabledClassButton","d-block bef bef-btn-btnBG__OPA__0_66 bef-text-mainBG bef-cursor-pointer bef-r-100per bef-fs-3rem bef-h-3_5rem bef-w-3_5rem")("tooltip","Cancelar edici\xf3n")("tooltipPosition","left")("showTooltip",!0)("tooltipClass","bef bef-r-1rem bef-text-mainBG bef-bg-btnBG bef-p-1rem")("matButtonType","icon")}}function tt(n,r){if(1&n){const t=e.EpF();e.O4$(),e.TgZ(0,"svg",42),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.changeChangers("description"))}),e._UZ(1,"path",39),e.qZA()}}function it(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"p",44),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.changeChangers("description"))}),e._UZ(1,"span",45),e.ALo(2,"safeHtml"),e.YNc(3,tt,2,0,"svg",41),e.qZA()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("innerHTML",e.lcZ(2,2,t.evento.description),e.oJD),e.xp6(2),e.Q6J("ngIf",!!t.isEdit)}}function nt(n,r){if(1&n&&(e.TgZ(0,"div"),e._UZ(1,"img",48),e.ALo(2,"safeHtml"),e.qZA()),2&n){const t=r.$implicit,i=e.oxw(2);e.xp6(1),e.s9C("alt",t.title),e.Q6J("src",e.xi3(2,2,i.url+"file/"+t.location,"url"),e.LSH)}}function ot(n,r){if(1&n&&(e.TgZ(0,"div")(1,"h3",46),e._uU(2," Fotos del evento "),e.qZA(),e.YNc(3,nt,3,5,"div",47),e.qZA()),2&n){const t=e.oxw();e.xp6(3),e.Q6J("ngForOf",t.evento.photos)}}function st(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"li",52)(1,"ul",53)(2,"li",54),e._uU(3),e.qZA(),e.TgZ(4,"li",54),e._uU(5),e.qZA()(),e.O4$(),e.TgZ(6,"svg",55),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,s=e.oxw(3);return e.KtG(s.asignTicket2Edit(o))}),e._UZ(7,"path",39),e.qZA()()}if(2&n){const t=e.oxw().$implicit;e.xp6(3),e.hij(" ",null==t.user?null:t.user.name," "),e.xp6(2),e.hij(" ",t.role," ")}}function rt(n,r){if(1&n&&(e.ynx(0),e.YNc(1,st,8,2,"li",51),e.BQk()),2&n){const t=r.$implicit;e.xp6(1),e.Q6J("ngIf","asistente"!==t.role)}}function ct(n,r){if(1&n&&(e.TgZ(0,"div")(1,"h3",46),e._uU(2," Operadores "),e.qZA(),e.TgZ(3,"ul",50),e.YNc(4,rt,2,1,"ng-container",47),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(4),e.Q6J("ngForOf",t.evento.tickets)}}const at=function(n){return{ticket:n}};function lt(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"h3",46),e._uU(2," Agregar operador "),e.qZA(),e.TgZ(3,"generic-input",49),e.NdJ("clicked",function(o){e.CHM(t);const s=e.oxw(2);return e.KtG(s.clickedDropdown(o))}),e.qZA()()}if(2&n){const t=e.oxw(2);e.xp6(3),e.Q6J("placeholder","Busca al operador")("thingFather",e.VKq(5,at,t.newTicket))("thing","ticket")("type","select-withSearcher")("options",t.newOperatorsOptions)}}function pt(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"li",52)(1,"span",56),e._uU(2),e.qZA(),e.O4$(),e.TgZ(3,"svg",55),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,s=e.oxw(3);return e.KtG(s.asignTicket2Edit(o))}),e._UZ(4,"path",39),e.qZA()()}if(2&n){const t=e.oxw().$implicit;e.xp6(2),e.hij(" ",null==t.user?null:t.user.name," ")}}function _t(n,r){if(1&n&&(e.ynx(0),e.YNc(1,pt,5,1,"li",51),e.BQk()),2&n){const t=r.$implicit;e.xp6(1),e.Q6J("ngIf","asistente"===t.role)}}function ft(n,r){if(1&n&&(e.TgZ(0,"div")(1,"h3",46),e._uU(2," Asistentes "),e.qZA(),e.TgZ(3,"ul",50),e.YNc(4,_t,2,1,"ng-container",47),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(4),e.Q6J("ngForOf",t.evento.tickets)}}function ut(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"h3",46),e._uU(2," Tipos de ticket "),e.qZA(),e.TgZ(3,"generic-input",49),e.NdJ("clicked",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s.clickedDropdown(o))}),e.qZA(),e.YNc(4,ct,5,1,"div",10),e.YNc(5,lt,4,7,"div",10),e.YNc(6,ft,5,1,"div",10),e.qZA()}if(2&n){const t=e.oxw();e.xp6(3),e.Q6J("placeholder",t.evento.ticketTypes)("thingFather",t.evento)("thing","ticketTypes")("type","select")("options",t.ticketTypesOptions),e.xp6(1),e.Q6J("ngIf",!!t.evento.operators&&!!t.evento.operators[0]),e.xp6(1),e.Q6J("ngIf",!!t.evento.tickets&&!!t.evento.tickets[0]),e.xp6(1),e.Q6J("ngIf",!!t.evento.asistents&&!!t.evento.asistents[0])}}function dt(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"generic-button",35),e.NdJ("clicked",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.modal="ticket")}),e.qZA()}2&n&&e.Q6J("type","AddTicket")("classButton","d-block mx-auto mat-elevation-z3 bef bef-my-2rem bef-btn-btnBG bef-text-mainBG bef-cursor-pointer bef-r-0_25rem bef-fs-1rem")("customHtml","Invitar a nuevo asistente")("disabledClassButton","d-block mx-auto bef bef-my-2rem bef-btn-btnBG__OPA__0_5 bef-text-mainBG bef-r-0_25rem bef-cursor-pointer bef-fs-1rem")("tooltip","Invitar a nuevo asistente")("tooltipPosition","left")("showTooltip",!0)("tooltipClass","bef bef-r-1rem bef-text-mainBG bef-bg-btnBG bef-p-1rem")("matButtonType","raised")}function bt(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"generic-button",57),e.NdJ("clicked",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onSubmit())}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("type","Editar")("classButton","d-block mx-auto mat-elevation-z3 bef bef-my-2rem bef-btn-btnBG bef-text-mainBG bef-cursor-pointer bef-r-0_25rem bef-fs-1rem")("customHtml",""===t.evento._id?"Crear evento":"Actualizar cambios")("disabledClassButton","d-block mx-auto bef bef-my-2rem bef-btn-btnBG__OPA__0_5 bef-text-mainBG bef-r-0_25rem bef-cursor-pointer bef-fs-1rem")("tooltip",""===t.evento._id?"Crear evento":"Actualizar cambios")("tooltipPosition","left")("showTooltip",!0)("tooltipClass","bef bef-r-1rem bef-text-mainBG bef-bg-btnBG bef-p-1rem")("matButtonType","raised")("disabled",!t.checkIfFormValid())}}function mt(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"mat-tab",58),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.cssCreate())}),e.TgZ(1,"activity",59),e.NdJ("activityEdited",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.getData(o.evento._id))}),e.qZA()()}if(2&n){const t=r.$implicit,i=e.oxw();e.s9C("label",t.title),e.xp6(1),e.Q6J("activity",t)("ticketTypes",i.evento.ticketTypes)("isEdit",i.isEdit)("eventoId",i.evento._id)("token",i.token)("evento",i.evento)}}function gt(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"mat-tab",58),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.cssCreate())}),e.TgZ(1,"activity",59),e.NdJ("activityEdited",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.getData(o.evento._id))}),e.qZA()()}if(2&n){const t=e.oxw();e.s9C("label",t.newActivity.title),e.xp6(1),e.Q6J("activity",t.newActivity)("ticketTypes",t.evento.ticketTypes)("isEdit",t.isEdit)("eventoId",t.evento._id)("token",t.token)("evento",t.evento)}}function ht(n,r){if(1&n&&e.GkF(0,60),2&n){e.oxw();const t=e.MAs(40);e.Q6J("ngTemplateOutlet",t)}}function vt(n,r){1&n&&e._UZ(0,"div")}function xt(n,r){1&n&&e.GkF(0)}function Tt(n,r){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"li",52)(2,"span",56),e._uU(3),e.qZA(),e.O4$(),e.TgZ(4,"svg",70),e.NdJ("click",function(){const s=e.CHM(t).$implicit,c=e.oxw(2);return e.KtG(c.activity2Ticket(s))}),e._UZ(5,"path",71),e.qZA()(),e.BQk()}if(2&n){const t=r.$implicit;e.xp6(3),e.hij(" ",t.title," ")}}const wt=function(n){return{text:n,evalThing:"required",spanClass:b}},kt=function(){return{type:"menuitem",option:"asistente",click:"TICKETROLE=asistente"}},yt=function(){return{type:"menuitem",option:"operador general",click:"TICKETROLE=operador general"}},Ct=function(){return{type:"menuitem",option:"operador de actividad",click:"TICKETROLE=operador de actividad"}},Et=function(){return{type:"menuitem",option:"operador de asistentes",click:"TICKETROLE=operador de asistentes"}},Bt=function(n,r,t,i){return[n,r,t,i]};function At(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",61)(1,"h4",62),e._uU(2),e.qZA(),e.TgZ(3,"button",63),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(void 0===o.modal)}),e.TgZ(4,"span",64),e._uU(5,"X"),e.qZA()()(),e.TgZ(6,"div",65)(7,"generic-input",66),e.NdJ("changesInput",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s.changesInput(o))}),e.qZA(),e.TgZ(8,"generic-input",67),e.NdJ("changesInput",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s.changesInput(o))}),e.qZA(),e.TgZ(9,"generic-input",68),e.NdJ("clicked",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s.clickedDropdown(o))}),e.qZA(),e.TgZ(10,"generic-input",69),e.NdJ("clicked",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s.clickedDropdown(o))}),e.qZA(),e.TgZ(11,"ul",50),e.YNc(12,Tt,6,1,"ng-container",47),e.qZA(),e.TgZ(13,"generic-input",68),e.NdJ("clicked",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s.clickedDropdown(o))}),e.qZA(),e.TgZ(14,"generic-button",57),e.NdJ("clicked",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onSubmitTicket())}),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(2),e.hij(" ",t.newTicket._id?"Editar "+("asistente"===t.newTicket.role?"asistente":"operador"):"Invitar nuevo asistente"," "),e.xp6(5),e.Q6J("labelTitle","Nombre del "+("asistente"===t.newTicket.role?"asistente":"operador"))("placeholder",null!=t.newTicket.user&&t.newTicket.user.name?null==t.newTicket.user?null:t.newTicket.user.name:"Nombre del "+("asistente"===t.newTicket.role?"asistente":"operador"))("thingFather",t.newTicket.user?t.newTicket.user:t.newTicketUser)("thing","name")("type","text")("disabled",!(null==t.newTicket.user||!t.newTicket.user._id))("required",!0),e.xp6(1),e.Q6J("labelTitle","Email del "+("asistente"===t.newTicket.role?"asistente":"operador"))("placeholder",null!=t.newTicket.user&&t.newTicket.user.email?null==t.newTicket.user?null:t.newTicket.user.email:"Nombre del "+("asistente"===t.newTicket.role?"asistente":"operador"))("thingFather",t.newTicket.user?t.newTicket.user:t.newTicketUser)("thing","email")("type","text")("disabled",!(null==t.newTicket.user||!t.newTicket.user._id))("spans",e.VKq(47,m,e.VKq(45,wt,"El email del "+("asistente"===t.newTicket.role?"asistente":"operador")+" es necesario.")))("required",!0),e.xp6(1),e.Q6J("labelTitle","Rol del "+("asistente"===t.newTicket.role?"asistente":"operador"))("placeholder",t.newTicket.role)("thingFather",t.newTicket)("thing","role")("type","select")("options",e.l5B(53,Bt,e.DdM(49,kt),e.DdM(50,yt),e.DdM(51,Ct),e.DdM(52,Et))),e.xp6(1),e.Q6J("labelTitle","Tipo de ticket del "+("asistente"===t.newTicket.role?"asistente":"operador"))("placeholder",t.newTicket.type)("thingFather",t.newTicket)("thing","type")("type","select")("options",t.ticketTypeOptions),e.xp6(2),e.Q6J("ngForOf",t.newTicket.activitiesAdmin),e.xp6(1),e.Q6J("labelTitle","Agregar actividades al "+("asistente"===t.newTicket.role?"asistente":"operador"))("placeholder","Busca una actividad")("thingFather",t.newTicket)("thing","activitiesAdmin")("type","select-withSearcher")("options",t.activities4Tickets),e.xp6(1),e.Q6J("type","EditarTicket")("classButton","d-block mx-auto mat-elevation-z3 bef bef-my-2rem bef-btn-btnBG bef-text-mainBG bef-cursor-pointer bef-r-0_25rem bef-fs-1rem")("customHtml",""===t.newTicket._id?"Crear ticket":"Actualizar cambios")("disabledClassButton","d-block mx-auto bef bef-my-2rem bef-btn-btnBG__OPA__0_5 bef-text-mainBG bef-r-0_25rem bef-cursor-pointer bef-fs-1rem")("tooltip",""===t.newTicket._id?"Crear ticket":"Actualizar cambios")("tooltipPosition","left")("showTooltip",!0)("tooltipClass","bef bef-r-1rem bef-text-mainBG bef-bg-btnBG bef-p-1rem")("matButtonType","raised")("disabled",!t.newTicket.user&&""===t.newTicketUser.email)}}function Zt(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",72),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.showOptions=!o.showOptions)}),e.qZA()}}function Gt(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",75)(1,"span",76),e._uU(2),e.qZA(),e.TgZ(3,"generic-button",35),e.NdJ("clicked",function(o){e.CHM(t);const s=e.oxw(3);return e.KtG(s.clickedButton(o))}),e.qZA()()}if(2&n){const t=e.oxw().$implicit;e.xp6(2),e.hij(" ",t.text," "),e.xp6(1),e.Q6J("type",t.click)("classButton","d-block mat-elevation-z3 bef bef-btn-btnBG bef-text-mainBG bef-cursor-pointer bef-r-100per bef-fs-2_5rem bef-h-3rem bef-w-3rem")("customHtml",t.icon)("disabledClassButton","d-block bef bef-btn-btnBG__OPA__0_66 bef-text-mainBG bef-cursor-pointer bef-r-100per bef-fs-3rem bef-h-3_5rem bef-w-3_5rem")("tooltip",t.text)("tooltipPosition","left")("showTooltip",!0)("tooltipClass","bef bef-r-1rem bef-text-mainBG bef-bg-btnBG bef-p-1rem")("matButtonType","icon")}}function It(n,r){if(1&n&&(e.ynx(0),e.YNc(1,Gt,4,10,"div",74),e.BQk()),2&n){const t=r.$implicit;e.xp6(1),e.Q6J("ngIf",!!t.show)}}function St(n,r){if(1&n&&(e.TgZ(0,"div",73),e.YNc(1,It,2,1,"ng-container",47),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.options)}}function Jt(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"generic-button",35),e.NdJ("clicked",function(){e.CHM(t);const o=e.oxw();return o.showOptions=!o.showOptions,e.KtG(o.cssCreate())}),e.qZA()}2&n&&e.Q6J("type","Show Options")("classButton","d-block mat-elevation-z3 bef bef-btn-btnBG bef-text-mainBG bef-cursor-pointer bef-r-100per bef-fs-3rem bef-h-3_5rem bef-w-3_5rem")("customHtml","+")("disabledClassButton","d-block bef bef-btn-btnBG__OPA__0_66 bef-text-mainBG bef-cursor-pointer bef-r-100per bef-fs-3rem bef-h-3_5rem bef-w-3_5rem")("tooltip","Show Options")("tooltipPosition","left")("showTooltip",!0)("tooltipClass","bef bef-r-1rem bef-text-mainBG bef-bg-btnBG bef-p-1rem")("matButtonType","icon")}const Nt=function(){return["/"]},Ot=function(n,r){return{"top-100 start-100":n,"top-0 start-0":r}};let ee=(()=>{class n{constructor(t,i,o,s,c,f,l){this.location=t,this._route=i,this._router=o,this._sharedService=s,this._eventoService=c,this._userService=f,this.store=l,this.url=y.N.api+"/evento/",this.evento=new Y("",null,null,"Descripci\xf3n del evento.","T\xedtulo del evento","Subt\xedtulo del evento",[],[],[],[],[],1,[],new Date,"Lugar del evento","","","","",[],new Date,new Date,null,"create",0,!1,[]),this.newActivity=new E("",0,"Nueva Actividad","Subt\xedtulo de la actividad","Descripci\xf3n de la actividad",null,[],[],[],new Date,"Lugar de la actividad","","","","",new Date,new Date,null,"create",0,!1,[]),this.newTicket=new B("",0,null,null,"asistente",[],new Date,new Date,null,"create",0,!1,[]),this.newTicketUser=new g.n("","","basic","asistente",[],"","","","",!1,0,new Date,new Date,null,"create",0,!1,[]),this.identity$=this.store.select($.Lm),this.lockeds={title:!0},this.ticketTypesOptions=this.getTicketTypesOptions(),this.newOperatorsOptions=this.getOperatorsOptions(),this.activities4Tickets=this.getActivities4Tickets(),this.ticketTypeOptions=this.getTicketTypeOptions(),this.isEdit=!1,this.changers=[],this.showOptions=!1,this.options=[{id:"edit",icon:this.getHTML("edit"),show:!1,text:"Editar",click:"edit"},{id:"photos",icon:this.getHTML("photos"),show:!1,text:"Comparte fotos",click:"photos"},{id:"score",icon:this.getHTML("score"),show:!1,text:"\xa1Calif\xedcanos!",click:"score"}],this.token="",this.token$=l.select($.kB),this.token$.subscribe({next:u=>{u&&(this.token=u)},error:u=>console.error(u)})}ngOnInit(){this._route.params.subscribe({next:t=>{t.id&&this.getData(t.id)},error:t=>{this._sharedService.consoleParser({thing:t,type:"error"})}}),this.getIdentity(),this.store.dispatch((0,oe.DK)()),this.cssCreate()}getIdentity(){this.identity$.subscribe({next:t=>{this.identity=t,this.configOptions()},error:t=>{this.options[1].show=!1,this.options[2].show=!1,this.options[3].show=!1,this._sharedService.consoleParser({thing:t,type:"error"}),p().fire("Error al cargar la informaci\xf3n del usuario",t.toString(),"error")}})}getData(t){this._eventoService.getEvento(t).subscribe({next:i=>{this.evento=i.evento?i.evento:this.evento,this.configData(),this.configOptions(),this.cssCreate()},error:i=>{this.configData(),this.configOptions(),this._sharedService.consoleParser({thing:i,type:"error"}),p().fire("Error al cargar la informaci\xf3n del evento.",i.toString(),"error")}})}configData(){""!==this.evento.title&&(this.lockeds.title=!1),this.newActivity=new E("",0,"Nueva Actividad","Subt\xedtulo de la actividad","Descripci\xf3n de la actividad",null,[],[],[],new Date,"Lugar de la actividad","","","","",new Date,new Date,null,"create",0,!1,[]),this.newTicketUser=new g.n("","","basic","asistente",[],"","","","",!1,0,new Date,new Date,null,"create",0,!1,[]),this.newOperatorsOptions=this.getOperatorsOptions(),this.activities4Tickets=this.getActivities4Tickets()}configOptions(){this.options[0].show=!!this.identity&&(this.checkRole(this.identity.roleType,this.identity.generalRole,"special")||this.checkRole(this.identity.roleType,this.identity.generalRole,"premium")&&!!this.evento.tickets.find(t=>t.user?._id===this.identity?._id&&"asistente"!==t.role)),this.options[1].show=!!this.identity&&(this.checkRole(this.identity.roleType,this.identity.generalRole,"special")||!!this.evento.tickets.find(t=>t.user?._id===this.identity?._id&&"asistente"===t.role)),this.options[2].show=!!this.identity&&(this.checkRole(this.identity.roleType,this.identity.generalRole,"special")||!!this.evento.tickets.find(t=>t.user?._id===this.identity?._id&&"asistente"===t.role))}onSubmit(){p().fire({title:"\xbfQuieres guardar los cambios?",icon:"warning",showDenyButton:!0,confirmButtonText:"Si",denyButtonText:"No"}).then(t=>{t.isConfirmed?""!==this.evento._id?this._eventoService.updateEvento(this.evento).subscribe({next:i=>{this._sharedService.consoleParser({thing:i,type:"log"}),this.evento=i.evento?i.evento:this.evento,this.configData(),this.configOptions(),this.cssCreate(),p().fire("Se guardaron los cambios","","success")},error:i=>{this._sharedService.consoleParser({thing:i,type:"error"}),p().fire("Error al guardar la informaci\xf3n del evento",i.toString(),"error")}}):this._eventoService.createEvento(this.evento).subscribe({next:i=>{this.evento=i.evento?i.evento:this.evento,this.configData(),this.configOptions(),this.cssCreate(),p().fire("Se creo el evento",`El evento ${this.evento.title} ha sido creado.`,"success"),p().fire({title:"\xbfQuieres crear otro evento?",icon:"warning",showDenyButton:!0,confirmButtonText:"Si",denyButtonText:"No"}).then(o=>{o.isConfirmed?(this.evento=new Y("",null,null,"Descripci\xf3n del evento.","T\xedtulo del evento","Subt\xedtulo del evento",[],[],[],[],[],1,[],new Date,"Lugar del evento","","","","",[],new Date,new Date,null,"create",0,!1,[]),this.newActivity=new E("",0,"Nueva Actividad","Subt\xedtulo de la actividad","Descripci\xf3n de la actividad",null,[],[],[],new Date,"Lugar de la actividad","","","","",new Date,new Date,null,"create",0,!1,[]),this.newTicket=new B("",0,null,null,"asistente",[],new Date,new Date,null,"create",0,!1,[]),this.newTicketUser=new g.n("","","basic","asistente",[],"","","","",!1,0,new Date,new Date,null,"create",0,!1,[])):this._router.navigate(["/evento/evento",this.evento._id])})},error:i=>{this._sharedService.consoleParser({thing:i,type:"error"}),p().fire("Error al guardar la informaci\xf3n del evento",i.toString(),"error")}}):p().fire("No se guardaron los cambios","","info")})}onSubmitTicket(){var t=this;return K(function*(){p().fire({title:"\xbfQuieres guardar los cambios?",icon:"warning",showDenyButton:!0,confirmButtonText:"Si",denyButtonText:"No"}).then(i=>{i.isConfirmed?K(function*(){if(""!==t.newTicket._id)t._eventoService.updateTicket(t.newTicket).subscribe({next:o=>{t._sharedService.consoleParser({thing:o,type:"log"}),t.newTicket=o.ticket?o.ticket:t.newTicket,t.getData(t.evento._id),p().fire("Se guardaron los cambios","","success")},error:o=>{t.getData(t.evento._id),t._sharedService.consoleParser({thing:o,type:"error"}),p().fire("Error al guardar la informaci\xf3n del ticket",o.toString(),"error")}});else try{let o=yield C(t._userService.getUser(t.newTicketUser.email,"email")).catch(c=>(t._sharedService.consoleParser({thing:c,type:"error"}),null));if(!o?.user&&(t.newTicketUser.name=""!==t.newTicketUser.name?t.newTicketUser.name:t.newTicketUser.email,o=yield C(t._userService.register(t.newTicketUser)),!o?.user))throw new Error("No se pudo crear el usuario");t.newTicket.evento=t.evento,t.newTicket.user=o.user,t._sharedService.consoleParser({thing:t.newTicket,type:"log"});let s=yield C(t._eventoService.createTicket(t.newTicket,t.newTicket.user._id,t.newTicket.evento._id));if(t._sharedService.consoleParser({thing:s,type:"log"}),!s)throw new Error("No se pudo crear el ticket");p().fire("Se guardaron los cambios","","success"),t.getData(t.evento._id)}catch(o){t._sharedService.consoleParser({thing:o,type:"error"}),p().fire("Error al guardar la informaci\xf3n del ticket",o.toString(),"error")}})():p().fire("No se guardaron los cambios","","info")})})()}getTicketTypesOptions(){return Array.from(Array(6).keys()).filter(t=>t>=(this.evento.activities[0]?Math.max(...this.evento.activities.map(i=>i.ticketType)):1)).map(t=>({type:"menuitem",option:`${t}`,click:`ticketTypes=${t}`}))}getTicketTypeOptions(){return Array.from(Array(6).keys()).filter(t=>t<=this.evento.ticketTypes).map(t=>({type:"menuitem",option:`${t}`,click:`TICKETTYPE=${t}`}))}changesInput(t){Object.keys(this.lockeds).forEach(i=>{this.lockeds[i]=t[i]?t.locked:this.lockeds[i]}),this.checkIfFormValid()&&this.cssCreate()}checkIfFormValid(){return Object.values(this.lockeds).every(t=>!1===t)}clickedDropdown(t){switch(!0){case t.click.includes("ticketTypes"):this.evento.ticketTypes=parseInt(t.click.split("=")[1]);break;case t.click.includes("TICKETTYPE"):this.newTicket.type=parseInt(t.click.split("=")[1]);break;case t.click.includes("OPERATOR"):this._sharedService.consoleParser({thing:t,type:"log"});let i=this.evento.tickets.find(s=>s.user?._id===t.click.split("=")[1]);this.newTicket=i||this.newTicket,this.activities4Tickets=this.getActivities4Tickets(),this.newTicketUser=new g.n("","","basic","asistente",[],"","","","",!1,0,new Date,new Date,null,"create",0,!1,[]),this.modal="ticket";break;case t.click.includes("TICKETROLE"):this.newTicket.role=t.click.split("=")[1],this.newOperatorsOptions=this.getOperatorsOptions();break;case t.click.includes("ACTIVITY"):let o=this.evento.activities.find(s=>s._id===t.click.split("=")[1]);o&&this.activity2Ticket(o)}}clickedButton(t){"edit"===t&&(this.isEdit=!0,this.showOptions=!1,this.cssCreate())}asignTicket2Edit(t){this.newTicket=t||new B("",0,null,null,"asistente",[],new Date,new Date,null,"create",0,!1,[]),this.newTicketUser=new g.n("","","basic","asistente",[],"","","","",!1,0,new Date,new Date,null,"create",0,!1,[]),this.modal="ticket",this.activities4Tickets=this.getActivities4Tickets()}getOperatorsOptions(){return this.evento.tickets.filter(t=>"asistente"===t.role).map(t=>({type:"menuitem",option:t.user?.name?t.user.name:"",click:t.user?._id?`OPERATOR=${t.user?._id}`:""}))}activity2Ticket(t){this.newTicket.activitiesAdmin.find(i=>i._id===t._id)?this.newTicket.activitiesAdmin=this.newTicket.activitiesAdmin.filter(i=>i._id!==t._id):this.newTicket.activitiesAdmin.push(t),this.activities4Tickets=this.getActivities4Tickets()}getActivities4Tickets(){return this.evento.activities.filter(t=>!this.newTicket.activitiesAdmin.find(i=>i._id===t._id)).map(t=>({type:"menuitem",option:t.title,click:`ACTIVITY=${t._id}`}))}changeChangers(t){if(this.isEdit)if(this.changers.includes(t)){let i=this.changers.indexOf(t);this.changers.splice(i,1)}else this.changers.push(t)}getHTML(t){return this._sharedService.getHTML(t)}returnToPreviousPage(){this.location.back()}checkRole(t,i,o){return this._sharedService.checkRole(t,i,o)}checkForOptionsCanShow(){return!!this.options.find(t=>!!t.show)}cssCreate(){this._sharedService.cssCreate()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(_.Ye),e.Y36(d.gz),e.Y36(d.F0),e.Y36(A.F),e.Y36(Z),e.Y36(ce.K),e.Y36(ae.yh))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-evento"]],decls:45,vars:47,consts:[[1,"d-flex","mx-auto","flex-wrap","justify-content-between","align-items-center","bef","bef-w-calcSD100per__MIN__2remED"],[3,"type","classButton","customHtml","disabledClassButton","tooltip","tooltipPosition","showTooltip","tooltipClass","clicked"],["href","/","rel","noopener noreferrer",3,"routerLink","matTooltip"],[3,"logoHeight","logoWidth"],[1,"bef","bef-w-2_5rem","bef-h-2_5rem"],[3,"type","classButton","customHtml","disabledClassButton","tooltip","tooltipPosition","showTooltip","tooltipClass","clicked",4,"ngIf"],[3,"dynamicHeight","disableRipple"],["labelClass","be bef-bgFocus-resaltaBG bef-textFocus-mainBG bef-text-mainText bef-r-0_25rem",3,"label","click"],[1,"mx-auto","bef","bef-w-calcSD100per__MIN__2remED","bef-hmn-100vh"],["class","bef bef-w-100per bef-hmx-20rem bef-objectFit-cover bef-objectPosition-center bef-r-0_125rem",3,"src","alt",4,"ngIf"],[4,"ngIf"],["class","d-flex flex-wrap justify-content-between align-items-end bef bef-my-2rem",4,"ngIf","ngIfElse"],["elseEditTitleTemplate",""],["elseEditSubTitleTemplate",""],[1,"d-flex","w-100","bef","bef-w-md-75per","mx-auto","my-0","bef-my-md-3rem","justify-content-start","bef-justifyContent-md-center","align-items-center"],[1,"bef","bef-bg-resaltaBG","bef-text-mainBG"],["elseEditDescriptionTemplate",""],[3,"type","classButton","customHtml","disabledClassButton","tooltip","tooltipPosition","showTooltip","tooltipClass","matButtonType","clicked",4,"ngIf"],[3,"type","classButton","customHtml","disabledClassButton","tooltip","tooltipPosition","showTooltip","tooltipClass","matButtonType","disabled","clicked",4,"ngIf"],["labelClass","bef bef-bgFocus-resaltaBG bef-textFocus-mainBG bef-text-mainText bef-r-0_25rem",3,"label","click",4,"ngFor","ngForOf"],["labelClass","bef bef-bgFocus-resaltaBG bef-textFocus-mainBG bef-text-mainText bef-r-0_25rem",3,"label","click",4,"ngIf"],[1,"w-100","d-flex","justify-content-center","align-items-center","position-fixed","bef","bef-h-100vh","bef-z-100",3,"ngClass"],[1,"w-100","bef","bef-h-100vh","bef-bg-btnBG__OPA__0_25","position-absolute","top-0","start-0",3,"click"],[1,"w-50","bef","bef-bg-mainBG","bef-r-1rem","bef-z-5","overflow-hidden","mat-elevation-z20",3,"ngSwitch"],[3,"ngTemplateOutlet",4,"ngSwitchCase"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["ticketModal",""],["class","position-fixed bef bef-t-0 bef-b-0 bef-w-100vw bef-h-100vh bef-bg-mainText__OPA__0_25 bef-z-9",3,"click",4,"ngIf"],[1,"position-fixed","bef","bef-b-2rem","bef-e-2rem","bef-z-10","d-flex","flex-column","align-items-end","bef-g-1rem"],["class","d-flex flex-column bef bef-g-1rem",4,"ngIf"],[1,"bef","bef-w-100per","bef-hmx-20rem","bef-objectFit-cover","bef-objectPosition-center","bef-r-0_125rem",3,"src","alt"],[3,"uploadInputConfig","options","uploaderId","uploaderBehaviour","dragNdropActive","customHtml","tooltip","recoverThing"],[1,"d-flex","flex-wrap","justify-content-between","align-items-end","bef","bef-my-2rem"],[1,"bef","bef-w-calcSD100per__MIN__3remED",3,"labelTitle","placeholder","thingFather","thing","type","spans","required","changesInput"],[3,"type","classButton","customHtml","disabledClassButton","tooltip","tooltipPosition","showTooltip","tooltipClass","matButtonType","clicked"],[1,"bef","bef-fs-2rem","fw-bold","mx-auto","text-break","my-0","bef-mt-md-3rem","text-start","bef-textAlign-md-center"],["xmlns","http://www.w3.org/2000/svg","width","32","height","32","fill","currentColor","class","bi bi-pencil","viewBox","0 0 16 16",3,"click",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","width","32","height","32","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-pencil",3,"click"],["d","M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168l10-10zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207 11.207 2.5zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293l6.5-6.5zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325z"],[1,"text-start","bef","bef-textAlign-md-center","my-0","bef-mb-md-3rem"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","class","bi bi-pencil","viewBox","0 0 16 16",3,"click",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-pencil",3,"click"],[3,"inputClasses","labelTitle","placeholder","thingFather","thing","type","spans","required","changesInput"],[1,"w-100","bef","bef-w-md-75per","mx-auto","text-start","bef","bef-textAlign-md-center",3,"click"],[3,"innerHTML"],[1,"fw-bold","text-start","bef","bef-textAlign-md-center","my-0","bef-mt-md-3rem","bef-mb-md-1rem"],[4,"ngFor","ngForOf"],[1,"bef","bef-w-clampSD200pxCOM50perCOM500pxED","bef-hmx-20rem","bef-objectFit-cover","bef-objectPosition-center","bef-r-0_125rem",3,"src","alt"],[3,"placeholder","thingFather","thing","type","options","clicked"],[1,"list-group","list-group-flush","bef","bef-bg-mainBG","bef-m-2rem"],["class","list-group-item bef bef-bg-mainBG d-flex justify-content-between",4,"ngIf"],[1,"list-group-item","bef","bef-bg-mainBG","d-flex","justify-content-between"],[1,"list-group","list-group-horizontal"],[1,"list-group-item","bef","bef-fs-1_5rem"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-pencil","bef","bef-cursor-pointer",3,"click"],[1,"bef","bef-fs-1_5rem"],[3,"type","classButton","customHtml","disabledClassButton","tooltip","tooltipPosition","showTooltip","tooltipClass","matButtonType","disabled","clicked"],["labelClass","bef bef-bgFocus-resaltaBG bef-textFocus-mainBG bef-text-mainText bef-r-0_25rem",3,"label","click"],[3,"activity","ticketTypes","isEdit","eventoId","token","evento","activityEdited"],[3,"ngTemplateOutlet"],[1,"d-flex","justify-content-between","p-3","bef","bef-bg-btnBG","align-items-center"],[1,"m-0","bef","bef-text-mainText"],["type","button","aria-label","Close",1,"close","btn","bef","bef-btn-alert","bef-text-mainBG",3,"click"],["aria-hidden","true"],[1,"p-3"],[1,"bef","bef-my-2rem","bef-w-calcSD100per__MIN__3remED",3,"labelTitle","placeholder","thingFather","thing","type","disabled","required","changesInput"],[1,"bef","bef-my-2rem","bef-w-calcSD100per__MIN__3remED",3,"labelTitle","placeholder","thingFather","thing","type","disabled","spans","required","changesInput"],[1,"bef","bef-my-2rem",3,"labelTitle","placeholder","thingFather","thing","type","options","clicked"],[3,"labelTitle","placeholder","thingFather","thing","type","options","clicked"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-trash3-fill",3,"click"],["d","M11 1.5v1h3.5a.5.5 0 0 1 0 1h-.538l-.853 10.66A2 2 0 0 1 11.115 16h-6.23a2 2 0 0 1-1.994-1.84L2.038 3.5H1.5a.5.5 0 0 1 0-1H5v-1A1.5 1.5 0 0 1 6.5 0h3A1.5 1.5 0 0 1 11 1.5Zm-5 0v1h4v-1a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5ZM4.5 5.029l.5 8.5a.5.5 0 1 0 .998-.06l-.5-8.5a.5.5 0 1 0-.998.06Zm6.53-.528a.5.5 0 0 0-.528.47l-.5 8.5a.5.5 0 0 0 .998.058l.5-8.5a.5.5 0 0 0-.47-.528ZM8 4.5a.5.5 0 0 0-.5.5v8.5a.5.5 0 0 0 1 0V5a.5.5 0 0 0-.5-.5Z"],[1,"position-fixed","bef","bef-t-0","bef-b-0","bef-w-100vw","bef-h-100vh","bef-bg-mainText__OPA__0_25","bef-z-9",3,"click"],[1,"d-flex","flex-column","bef","bef-g-1rem"],["class","d-flex flex-row justify-content-end align-items-center bef bef-g-1rem",4,"ngIf"],[1,"d-flex","flex-row","justify-content-end","align-items-center","bef","bef-g-1rem"],[1,"bef","bef-text-mainBG"]],template:function(t,i){if(1&t&&(e.TgZ(0,"header",0)(1,"generic-button",1),e.NdJ("clicked",function(){return i.returnToPreviousPage()}),e.qZA(),e.TgZ(2,"a",2),e._UZ(3,"logo-show",3),e.qZA(),e.TgZ(4,"div",4),e.YNc(5,Oe,1,8,"generic-button",5),e.qZA()(),e.TgZ(6,"mat-tab-group",6)(7,"mat-tab",7),e.NdJ("click",function(){return i.cssCreate()}),e.TgZ(8,"div",8),e.YNc(9,He,2,5,"img",9),e.YNc(10,Pe,2,15,"ng-container",10),e.YNc(11,Le,3,19,"div",11),e.YNc(12,Ye,3,2,"ng-template",null,12,e.W1O),e.YNc(14,Ue,3,19,"div",11),e.YNc(15,je,3,2,"ng-template",null,13,e.W1O),e.TgZ(17,"div",14)(18,"mat-chip",15),e._uU(19),e.ALo(20,"date"),e.qZA(),e.TgZ(21,"mat-chip",15),e._uU(22),e.qZA()(),e.YNc(23,We,4,25,"div",10),e.YNc(24,et,3,19,"div",11),e.YNc(25,it,4,4,"ng-template",null,16,e.W1O),e.YNc(27,ot,4,1,"div",10),e.YNc(28,ut,7,8,"div",10),e.YNc(29,dt,1,9,"generic-button",17),e.YNc(30,bt,1,10,"generic-button",18),e.qZA()(),e.YNc(31,mt,2,7,"mat-tab",19),e.YNc(32,gt,2,7,"mat-tab",20),e.qZA(),e.TgZ(33,"div",21)(34,"div",22),e.NdJ("click",function(){return i.modal=void 0}),e.qZA(),e.TgZ(35,"div",23),e.YNc(36,ht,1,1,"ng-container",24),e.YNc(37,vt,1,0,"div",25),e.YNc(38,xt,1,0,"ng-container",26),e.qZA()(),e.YNc(39,At,15,58,"ng-template",null,27,e.W1O),e.YNc(41,Zt,1,0,"div",28),e.TgZ(42,"div",29),e.YNc(43,St,2,1,"div",30),e.YNc(44,Jt,1,9,"generic-button",17),e.qZA()),2&t){const o=e.MAs(13),s=e.MAs(16),c=e.MAs(26);e.xp6(1),e.Q6J("type","return")("classButton","d-block mat-elevation-z3 bef bef-btnOutline-btnBG bef-bc-btnBG bef-bW-btnBG bef-bS-solid bef-text-mainText bef-textHover-mainBG bef-cursor-pointer bef-r-100per bef-fs-2rem bef-h-2_5rem bef-w-2_5rem p-0")("customHtml",i.getHTML("back"))("disabledClassButton","d-block bef bef-btnOutline-btnBG__OPA__0_66 bef-bc-btnBG bef-bW-btnBG bef-bS-solid bef-text-mainText bef-textHover-mainBG bef-cursor-pointer bef-r-100per bef-fs-2rem bef-h-2_5rem bef-w-2_5rem p-0")("tooltip","Regresar")("tooltipPosition","left")("showTooltip",!0)("tooltipClass","bef bef-r-1rem bef-text-mainBG bef-bg-btnBG bef-p-1rem"),e.xp6(1),e.Q6J("routerLink",e.DdM(43,Nt))("matTooltip","Inicio"),e.xp6(1),e.Q6J("logoHeight","3rem")("logoWidth","3rem"),e.xp6(2),e.Q6J("ngIf",!!i.isEdit),e.xp6(1),e.Q6J("dynamicHeight",!0)("disableRipple",!0),e.xp6(1),e.s9C("label",i.evento.title),e.xp6(2),e.Q6J("ngIf",!!i.evento.headerImage),e.xp6(1),e.Q6J("ngIf",!!i.isEdit&&""!==i.evento._id),e.xp6(1),e.Q6J("ngIf",(i.changers.includes("title")||""===i.evento.title)&&!0===i.isEdit)("ngIfElse",o),e.xp6(3),e.Q6J("ngIf",(i.changers.includes("subtitle")||""===i.evento.subtitle)&&!0===i.isEdit)("ngIfElse",s),e.xp6(5),e.hij(" ",e.xi3(20,40,i.evento.date,"dd/MM/YYYY HH:mm a")," "),e.xp6(3),e.hij(" ",i.evento.place," "),e.xp6(1),e.Q6J("ngIf",!!i.isEdit),e.xp6(1),e.Q6J("ngIf",(i.changers.includes("description")||""===i.evento.description)&&!0===i.isEdit)("ngIfElse",c),e.xp6(3),e.Q6J("ngIf",!!i.evento.photos&&!!i.evento.photos[0]),e.xp6(1),e.Q6J("ngIf",!!i.isEdit),e.xp6(1),e.Q6J("ngIf",!!i.isEdit),e.xp6(1),e.Q6J("ngIf",!!i.isEdit),e.xp6(1),e.Q6J("ngForOf",i.evento.activities),e.xp6(1),e.Q6J("ngIf",!!i.isEdit&&""!==i.evento._id),e.xp6(1),e.Q6J("ngClass",e.WLB(44,Ot,!i.modal,!!i.modal)),e.xp6(2),e.Q6J("ngSwitch",i.modal),e.xp6(1),e.Q6J("ngSwitchCase","ticket"),e.xp6(1),e.Q6J("ngSwitchCase",!1),e.xp6(4),e.Q6J("ngIf",!!i.showOptions),e.xp6(2),e.Q6J("ngIf",!!i.showOptions),e.xp6(1),e.Q6J("ngIf",i.checkForOptionsCanShow())}},dependencies:[_.mk,_.sg,_.O5,_.tP,_.RF,_.n9,_.ED,d.rH,U.V,G.x,z.G,j.k,V.uX,V.SP,R.gM,W.HS,Ne,_.uU,X.z]}),n})();var I=a(7155),Ht=a(5828),Mt=a(1572);function Ft(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"generic-button",1),e.NdJ("clicked",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.isEdit=!o.isEdit)}),e.qZA()}2&n&&e.Q6J("type","cancelEdit")("classButton","d-block mat-elevation-z3 bef bef-btnOutline-btnBG bef-bc-btnBG bef-bW-btnBG bef-bS-solid bef-text-mainText bef-textHover-mainBG bef-cursor-pointer bef-r-100per bef-fs-1_5rem bef-h-2_5rem bef-w-2_5rem p-0")("customHtml","X")("disabledClassButton","d-block bef bef-btnOutline-btnBG__OPA__0_66 bef-bc-btnBG bef-bW-btnBG bef-bS-solid bef-text-mainText bef-textHover-mainBG bef-cursor-pointer bef-r-100per bef-fs-1_5rem bef-h-2_5rem bef-w-2_5rem p-0")("tooltip","Cancelar edici\xf3n")("tooltipPosition","left")("showTooltip",!0)("tooltipClass","bef bef-r-1rem bef-text-mainBG bef-bg-btnBG bef-p-1rem")}function Dt(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"generic-table",15),e.NdJ("doAction",function(o){e.CHM(t);const s=e.oxw(2);return e.KtG(s.doAction(o))})("changePage",function(o){e.CHM(t);const s=e.oxw(2);return e.KtG(s.changePage(o))})("changePageSize",function(o){e.CHM(t);const s=e.oxw(2);return e.KtG(s.changePageSize(o))})("sorted",function(o){e.CHM(t);const s=e.oxw(2);return e.KtG(s.getSort(o))})("clicked",function(o){e.CHM(t);const s=e.oxw(2);return e.KtG(s.clickedButton(o))})("changesInput",function(o){e.CHM(t);const s=e.oxw(2);return e.KtG(s.changesInput(o))})("buttonId",function(o){e.CHM(t);const s=e.oxw(2);return e.KtG(s.buttonId(o))})("recoverThing",function(o){e.CHM(t);const s=e.oxw(2);return e.KtG(s.recoverThing(o))})("recoverSelected",function(o){e.CHM(t);const s=e.oxw(2);return e.KtG(s.recoverSelected(o))}),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("displayedColumns",t.displayedColumns)("dataSource",t.ELEMENT_DATA)("actions",t.actions)("currentPage",t.currentPage)("pages",t.getPages())("pageSize",t.pageSize)("type",t.type)("specialColumns",t.specialColumns)("getSpecialCell",t.getSpecialCell)("customHtml",t.getHTML)("storedSpecialCells",t.storedSpecialCells)("currentSort",t.currentSort)}}function qt(n,r){1&n&&(e.TgZ(0,"h2",16),e._uU(1,"No hay Data"),e.qZA(),e.TgZ(2,"p",17),e._uU(3," Trata buscando algo m\xe1s. "),e.qZA())}function Pt(n,r){if(1&n&&(e.ynx(0),e.YNc(1,Dt,1,12,"generic-table",13),e.YNc(2,qt,4,0,"ng-template",null,14,e.W1O),e.BQk()),2&n){const t=e.MAs(3),i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.ELEMENT_DATA.length>0)("ngIfElse",t)}}function Qt(n,r){1&n&&(e.TgZ(0,"h2",16),e._uU(1,"Cargando lista"),e.qZA(),e._UZ(2,"mat-spinner",18))}function Lt(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",19),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.showOptions=!o.showOptions)}),e.qZA()}}function Kt(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",22)(1,"span",23),e._uU(2),e.qZA(),e.TgZ(3,"generic-button",12),e.NdJ("clicked",function(o){e.CHM(t);const s=e.oxw(2);return e.KtG(s.clickedButton(o))}),e.qZA()()}if(2&n){const t=r.$implicit;e.xp6(2),e.hij(" ",t.text," "),e.xp6(1),e.Q6J("type",t.click)("classButton","d-block mat-elevation-z3 bef bef-btn-btnBG bef-text-mainBG bef-cursor-pointer bef-r-100per bef-fs-2_5rem bef-h-3rem bef-w-3rem")("customHtml",t.icon)("disabledClassButton","d-block bef bef-btn-btnBG__OPA__0_66 bef-text-mainBG bef-cursor-pointer bef-r-100per bef-fs-3rem bef-h-3_5rem bef-w-3_5rem")("tooltip",t.text)("tooltipPosition","left")("showTooltip",!0)("tooltipClass","bef bef-r-1rem bef-text-mainBG bef-bg-btnBG bef-p-1rem")("matButtonType","icon")}}function Yt(n,r){if(1&n&&(e.TgZ(0,"div",20),e.YNc(1,Kt,4,10,"div",21),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.options)}}const $t=function(){return["/"]};let te=(()=>{class n{constructor(t,i,o,s){this.location=t,this._router=i,this._sharedService=o,this._eventoService=s,this.eventos=[],this.ELEMENT_DATA=[],this.dataSource=new I.by(this.eventos),this.isEdit=!1,this.displayedColumns=["title","operators","asistents"],this.actions=[],this.currentPage=1,this.pages=1,this.pageSize=10,this.type="evento",this.specialColumns=[],this.getSpecialCell=c=>{let f=this.storedSpecialCells.find(l=>c===l.value);if(f)return f.cell;{let l={type:"customHtml",thing:c};return!0===c.includes("Button")&&(l.type="button",l.object={type:c,classButton:"btn btn-primary",disabled:!1}),this.storedSpecialCells.push({value:c,cell:l,index:this.storedSpecialCells.length}),l}},this.storedSpecialCells=[],this.currentSort="_id",this.loadingData=!1,this.showOptions=!1,this.options=[{id:"create",icon:this.getHTML("create"),show:!0,text:"Crear nuevo evento",click:"create"}]}ngOnInit(){this.getData(),this.cssCreate()}getData(){this.loadingData=!0,this.ELEMENT_DATA=[],this._eventoService.getEventos(this.currentPage,this.pageSize).subscribe({next:t=>{this.eventos=t.eventos,this.ELEMENT_DATA=this.eventos.map(i=>({_id:i._id,title:i.title,operators:`\n            <ul class="list-group list-group-numbered">\n            ${i.operators.map(o=>`\n                <li class="list-group-item">\n                  <ul class="list-group list-group-horizontal">\n                    <li class="list-group-item">Name: ${o.name}</li>\n                    <li class="list-group-item">Role: ${i.tickets.find(s=>s.user?._id===o._id)?.role}</li>\n                  </ul>\n                </li>\n                `).join("")}\n            </ul>`,asistents:`\n            <ul class="list-group list-group-numbered">\n            ${i.asistents.filter(o=>!i.operators.find(s=>s._id===o._id)).slice(0,i.asistents.length>=5?5:i.asistents.length).map(o=>`\n                <li class="list-group-item">Name: ${o.name}</li>\n                `).join("")}\n              ${i.asistents.length>=5?`\n                <li class="list-group-item">\n                  <span class="badge bef bef-bg-resaltaBG bef-text-mainBG rounded-pill">${i.asistents.length-5} M\xe1s</span>\n                </li>`:""}\n            </ul>`})),this.dataSource=new I.by(this.ELEMENT_DATA),this.pages=t.pages,this.loadingData=!1},error:t=>{this._sharedService.consoleParser({thing:t,type:"error"}),this.ELEMENT_DATA=[],this.dataSource=new I.by(this.ELEMENT_DATA),this.loadingData=!1}})}getPages(){let t=[];for(let i=1;i<=this.pages;i++)t.push(i);return t}doAction(t){this._sharedService.consoleLog(t)}changePage(t){this.currentPage=t,this.getData()}changePageSize(t){this.pageSize=t,this.currentPage=1}getSort(t){this.currentSort="desc"===t.direction?"-"+t.active:t.active}clickedButton(t){switch(t){case"edit":this.isEdit=!0,this.showOptions=!1;break;case"create":this._router.navigate(["/evento/evento"]),this.showOptions=!1}}changesInput(t){this._sharedService.consoleLog(t)}buttonId(t){this._sharedService.consoleLog(t)}recoverThing(t){this._sharedService.consoleLog(t)}recoverSelected(t){this._sharedService.consoleLog(t),this._router.navigate(["/evento/evento",t._id])}getHTML(t){return this._sharedService.getHTML(t)}returnToPreviousPage(){this.location.back()}cssCreate(){this._sharedService.cssCreate()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(_.Ye),e.Y36(d.F0),e.Y36(A.F),e.Y36(Z))},n.\u0275cmp=e.Xpm({type:n,selectors:[["evento-list"]],decls:15,vars:27,consts:[[1,"d-flex","mx-auto","flex-wrap","justify-content-between","align-items-center","bef","bef-w-calcSD100per__MIN__2remED"],[3,"type","classButton","customHtml","disabledClassButton","tooltip","tooltipPosition","showTooltip","tooltipClass","clicked"],["href","/","rel","noopener noreferrer",3,"routerLink","matTooltip"],[3,"logoHeight","logoWidth"],[1,"bef","bef-w-2_5rem","bef-h-2_5rem"],[3,"type","classButton","customHtml","disabledClassButton","tooltip","tooltipPosition","showTooltip","tooltipClass","clicked",4,"ngIf"],[1,"bef","bef-fs-2rem","fw-bold","mx-auto","text-break","my-0","bef-mt-md-3rem","text-start","bef-textAlign-md-center"],[4,"ngIf","ngIfElse"],["elseLoadingDataTemplate",""],["class","position-fixed bef bef-t-0 bef-b-0 bef-w-100vw bef-h-100vh bef-bg-mainText__OPA__0_25 bef-z-9",3,"click",4,"ngIf"],[1,"position-fixed","bef","bef-b-2rem","bef-e-2rem","bef-z-10","d-flex","flex-column","align-items-end","bef-g-1rem"],["class","d-flex flex-column bef bef-g-1rem",4,"ngIf"],[3,"type","classButton","customHtml","disabledClassButton","tooltip","tooltipPosition","showTooltip","tooltipClass","matButtonType","clicked"],["class","d-block bef bef-mx-2rem",3,"displayedColumns","dataSource","actions","currentPage","pages","pageSize","type","specialColumns","getSpecialCell","customHtml","storedSpecialCells","currentSort","doAction","changePage","changePageSize","sorted","clicked","changesInput","buttonId","recoverThing","recoverSelected",4,"ngIf","ngIfElse"],["elseNoDataTemplate",""],[1,"d-block","bef","bef-mx-2rem",3,"displayedColumns","dataSource","actions","currentPage","pages","pageSize","type","specialColumns","getSpecialCell","customHtml","storedSpecialCells","currentSort","doAction","changePage","changePageSize","sorted","clicked","changesInput","buttonId","recoverThing","recoverSelected"],[1,"text-center","my-3","bef","bef-text-mainText","fw-bold"],[1,"text-center"],[1,"d-block","mx-auto"],[1,"position-fixed","bef","bef-t-0","bef-b-0","bef-w-100vw","bef-h-100vh","bef-bg-mainText__OPA__0_25","bef-z-9",3,"click"],[1,"d-flex","flex-column","bef","bef-g-1rem"],["class","d-flex flex-row justify-content-end align-items-center bef bef-g-1rem",4,"ngFor","ngForOf"],[1,"d-flex","flex-row","justify-content-end","align-items-center","bef","bef-g-1rem"],[1,"bef","bef-text-mainBG"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"generic-button",1),e.NdJ("clicked",function(){return i.returnToPreviousPage()}),e.qZA(),e.TgZ(2,"a",2),e._UZ(3,"logo-show",3),e.qZA(),e.TgZ(4,"div",4),e.YNc(5,Ft,1,8,"generic-button",5),e.qZA()(),e.TgZ(6,"h1",6),e._uU(7," Lista de eventos\n"),e.qZA(),e.YNc(8,Pt,4,2,"ng-container",7),e.YNc(9,Qt,3,0,"ng-template",null,8,e.W1O),e.YNc(11,Lt,1,0,"div",9),e.TgZ(12,"div",10),e.YNc(13,Yt,2,1,"div",11),e.TgZ(14,"generic-button",12),e.NdJ("clicked",function(){return i.showOptions=!i.showOptions}),e.qZA()()),2&t){const o=e.MAs(10);e.xp6(1),e.Q6J("type","return")("classButton","d-block mat-elevation-z3 bef bef-btnOutline-btnBG bef-bc-btnBG bef-bW-btnBG bef-bS-solid bef-text-mainText bef-textHover-mainBG bef-cursor-pointer bef-r-100per bef-fs-2rem bef-h-2_5rem bef-w-2_5rem p-0")("customHtml",i.getHTML("back"))("disabledClassButton","d-block bef bef-btnOutline-btnBG__OPA__0_66 bef-bc-btnBG bef-bW-btnBG bef-bS-solid bef-text-mainText bef-textHover-mainBG bef-cursor-pointer bef-r-100per bef-fs-2rem bef-h-2_5rem bef-w-2_5rem p-0")("tooltip","Regresar")("tooltipPosition","left")("showTooltip",!0)("tooltipClass","bef bef-r-1rem bef-text-mainBG bef-bg-btnBG bef-p-1rem"),e.xp6(1),e.Q6J("routerLink",e.DdM(26,$t))("matTooltip","Inicio"),e.xp6(1),e.Q6J("logoHeight","3rem")("logoWidth","3rem"),e.xp6(2),e.Q6J("ngIf",!!i.isEdit),e.xp6(3),e.Q6J("ngIf",!i.loadingData)("ngIfElse",o),e.xp6(3),e.Q6J("ngIf",!!i.showOptions),e.xp6(2),e.Q6J("ngIf",!!i.showOptions),e.xp6(1),e.Q6J("type","Show Options")("classButton","d-block mat-elevation-z3 bef bef-btn-btnBG bef-text-mainBG bef-cursor-pointer bef-r-100per bef-fs-3rem bef-h-3_5rem bef-w-3_5rem")("customHtml","+")("disabledClassButton","d-block bef bef-btn-btnBG__OPA__0_66 bef-text-mainBG bef-cursor-pointer bef-r-100per bef-fs-3rem bef-h-3_5rem bef-w-3_5rem")("tooltip","Show Options")("tooltipPosition","left")("showTooltip",!0)("tooltipClass","bef bef-r-1rem bef-text-mainBG bef-bg-btnBG bef-p-1rem")("matButtonType","icon")}},dependencies:[_.sg,_.O5,d.rH,Ht.p,G.x,j.k,Mt.Ou,R.gM]}),n})();var S=a(493);const Ut=[{path:"evento",component:ee,canActivate:[()=>(0,S.$)()]},{path:"evento/:id",component:ee},{path:"evento-list",component:te,canActivate:[()=>(0,S.$)()]},{path:"evento-list/:page",component:te,canActivate:[()=>(0,S.$)()]}];let zt=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[d.Bz.forChild(Ut),d.Bz]}),n})();var jt=a(8828);let Vt=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[_.ez,zt,jt.m]}),n})()}}]);